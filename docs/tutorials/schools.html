<!doctype html>
<html class="docs-version-v1.2.0" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CV1VB9VF13"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-CV1VB9VF13",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Zed" href="/opensearch.xml">
<link rel="stylesheet" href="https://use.typekit.net/nll6rzm.css"><title data-rh="true">Zed and Schools Data | Zed</title><meta data-rh="true" property="og:image" content="https://zed.brimdata.io/img/zed-social-image.jpg"><meta data-rh="true" name="twitter:image" content="https://zed.brimdata.io/img/zed-social-image.jpg"><meta data-rh="true" property="og:url" content="https://zed.brimdata.io/docs/tutorials/schools"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_version" content="v1.2.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-v1.2.0"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="v1.2.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-v1.2.0"><meta data-rh="true" name="twitter:card" content="summary"><meta data-rh="true" name="twitter:site" content="@brimdata"><meta data-rh="true" name="twitter:image:alt" content="Zed Documentation Image"><meta data-rh="true" property="og:title" content="Zed and Schools Data | Zed"><meta data-rh="true" name="description" content="This document provides a beginner&#x27;s overview of the Zed language"><meta data-rh="true" property="og:description" content="This document provides a beginner&#x27;s overview of the Zed language"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://zed.brimdata.io/docs/tutorials/schools"><link data-rh="true" rel="alternate" href="https://zed.brimdata.io/docs/tutorials/schools" hreflang="en"><link data-rh="true" rel="alternate" href="https://zed.brimdata.io/docs/tutorials/schools" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://WZNIEWJ5O6-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.76c4b5d7.css">
<link rel="preload" href="/assets/js/runtime~main.920265a1.js" as="script">
<link rel="preload" href="/assets/js/main.341fc2f9.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/zed-logo.svg" alt="Zed Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/zed-logo.svg" alt="Zed Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Zed</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link" href="/docs">v1.2.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/tutorials/schools">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/tutorials/schools">v1.2.0</a></li><li><a class="dropdown__link" href="/docs/v1.1.0/tutorials/schools">v1.1.0</a></li></ul></div><a href="https://github.com/brimdata" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_S7eR toggle_TdHA toggleDisabled_f9M3"><div class="toggleButton_rCf9" role="button" tabindex="-1"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></div><input type="checkbox" class="toggleScreenReader_g2nN" aria-label="Switch between dark and light mode (currently light mode)"></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/install">Installation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/commands">Commands</a><button aria-label="Toggle the collapsible sidebar category &#x27;Commands&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/docs/tutorials">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/zq">zq</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/zed">zed</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorials/join">Join</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/tutorials/schools">Schools Data</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/language">Language</a><button aria-label="Toggle the collapsible sidebar category &#x27;Language&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/formats">Formats</a><button aria-label="Toggle the collapsible sidebar category &#x27;Formats&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/lake/api">Lake</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/libraries">Libraries</a><button aria-label="Toggle the collapsible sidebar category &#x27;Libraries&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/">üè†</a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/docs/tutorials">Tutorials</a></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/docs/tutorials/schools">Schools Data</a></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v1.2.0</span><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Zed and Schools Data</h1><blockquote><p>This document provides a beginner&#x27;s overview of the Zed language
using the <a href="/docs/commands/zq">zq command</a> and
<a href="https://github.com/brimdata/zed/blob/v1.2.0/testdata/edu/README.md" target="_blank" rel="noopener noreferrer">real-world data</a> relating to California schools
and test scores.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_mojV" id="1-getting-started">1. Getting Started<a class="hash-link" href="#1-getting-started" title="Direct link to heading">‚Äã</a></h2><p>If you want to follow along by running the examples, simply
<a href="/docs/install">install zq</a> and copy the
data files used here into your working directory:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">curl https://raw.githubusercontent.com/brimdata/zed/main/testdata/edu/schools.zson &gt; schools.zson</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl https://raw.githubusercontent.com/brimdata/zed/main/testdata/edu/testscores.zson &gt; testscores.zson</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl https://raw.githubusercontent.com/brimdata/zed/main/testdata/edu/webaddrs.zson &gt; webaddrs.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>These files are all encoded in the human-readable <a href="/docs/formats/zson">ZSON format</a>
so you can easily have a look at them.  ZSON is not optimized for speed but these
files are small enough that the example queries here will all run fast enough.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="2-exploring-the-data">2. Exploring the Data<a class="hash-link" href="#2-exploring-the-data" title="Direct link to heading">‚Äã</a></h2><p>It&#x27;s always a good idea to get a feel for any new data, which is easy to do
with Zed.  Zed&#x27;s <a href="/docs/language/operators/sample">sample operator</a> is just the ticket ---
<code>sample</code> will select one representative value from each &quot;shape&quot; of data present
in the input, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -Z &#x27;sample | sort this&#x27; schools.zson testscores.zson webaddrs.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>displays</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AvgScrMath: null (uint16),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AvgScrRead: null (uint16),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AvgScrWrite: null (uint16),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cname: &quot;Riverside&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dname: &quot;Beaumont Unified&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sname: &quot;21st Century Learning Institute&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    School: &quot;&#x27;3R&#x27; Middle&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    District: &quot;Nevada County Office of Education&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    City: &quot;Nevada City&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    County: &quot;Nevada&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Zip: &quot;95959&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Latitude: null (float64),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Longitude: null (float64),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Magnet: null (bool),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    OpenDate: 1995-10-30T00:00:00Z,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ClosedDate: 1996-06-28T00:00:00Z,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Phone: null (string),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    StatusType: &quot;Merged&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Website: null (string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Website: &quot;abbott.lynwood.edlioschool.com&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    addr: 151.101.0.80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><blockquote><p>Note that the <code>-Z</code> option tells <code>zq</code> to &quot;pretty print&quot; the output in
the <a href="/docs/formats/zson">ZSON</a> format.
Furthermore, you will notice these examples often include a <code>-z</code> to indicate
line-oriented ZSON, which is the default when <code>zq</code> is writing to standard output.
You can omit <code>-z</code> when running these commands on the terminal but we include
them here for clarity and because all of the examples are tied to automated testing,
which does not utilize a terminal for standard output.</p></blockquote><p>You can also quickly see a list of the leaf-value data types with this query:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -Z &quot;sample | over this | by typeof(value) | yield typeof | sort&quot; schools.zson testscores.zson webaddrs.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>which emits</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;uint16&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;time&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;float64&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;bool&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;string&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;ip&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Nothing too tricky here.  After a quick review of the shapes and types,
you will notice they are just three relatively simple tables, which is no surprise
since we obtained the original data from
<a href="https://github.com/brimdata/zed/blob/v1.2.0/testdata/edu/README.md" target="_blank" rel="noopener noreferrer">SQLite database files</a>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="3-searching">3. Searching<a class="hash-link" href="#3-searching" title="Direct link to heading">‚Äã</a></h2><p>Searching with Zed is easy but powerful because it blends together the
keyword search patterns of Web or email search with the more precise
predicate matching patterns of query languages like SQL.</p><p>With this in mind, you can simply start typing keyword search phrases in Zed
and they will usually do the right thing.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="31-keyword-search">3.1 Keyword Search<a class="hash-link" href="#31-keyword-search" title="Direct link to heading">‚Äã</a></h3><p>With keyword search, you can just type a keyword that you want to look for, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z Ygnacio schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>which gives the one matching record:</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Valencia (Ygnacio) High (Alternative)&quot;,District:&quot;Delano Joint Union High&quot;,City:&quot;Delano&quot;,County:&quot;Kern&quot;,Zip:&quot;93215-1526&quot;,Latitude:null(float64),Longitude:null(float64),Magnet:null(bool),OpenDate:1980-07-01T00:00:00Z,ClosedDate:2009-08-01T00:00:00Z,Phone:null(string),StatusType:&quot;Closed&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Ygnacio Valley Elementary&quot;,District:&quot;Mt. Diablo Unified&quot;,City:&quot;Concord&quot;,County:&quot;Contra Costa&quot;,Zip:&quot;94518-2595&quot;,Latitude:37.950182,Longitude:-122.0283,Magnet:false,OpenDate:1980-07-01T00:00:00Z,ClosedDate:null(time),Phone:&quot;(925) 682-9336&quot;,StatusType:&quot;Active&quot;,Website:&quot;www.mdusd.org&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Ygnacio Valley High&quot;,District:&quot;Mt. Diablo Unified&quot;,City:&quot;Concord&quot;,County:&quot;Contra Costa&quot;,Zip:&quot;94518-2899&quot;,Latitude:37.936674,Longitude:-122.02325,Magnet:true,OpenDate:1980-07-01T00:00:00Z,ClosedDate:null(time),Phone:&quot;(925) 685-8414&quot;,StatusType:&quot;Active&quot;,Website:&quot;www.mdusd.org&quot;}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>As with keyword search, you can simply concantenate keywords to require both
of them to match (i.e., a &quot;logical AND&quot; of the two search predicates), e.g.
we can whittle down the two records above by adding the keyword <em>Delano</em></p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;Ygnacio Delano&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>and we get just the one record that matches:</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Valencia (Ygnacio) High (Alternative)&quot;,District:&quot;Delano Joint Union High&quot;,City:&quot;Delano&quot;,County:&quot;Kern&quot;,Zip:&quot;93215-1526&quot;,Latitude:null(float64),Longitude:null(float64),Magnet:null(bool),OpenDate:1980-07-01T00:00:00Z,ClosedDate:2009-08-01T00:00:00Z,Phone:null(string),StatusType:&quot;Closed&quot;,Website:null(string)}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Under the covers, a keyword search translates to Zed&#x27;s <a href="/docs/language/functions/grep">grep function</a>,
which lets you search specific fields instead of the entire input value, e.g.,
we can search for the string &quot;bar&quot; in the <code>City</code> field and list all the unique
cities that match with a <a href="#52-grouping">group-by</a>:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -f text &#x27;grep(&quot;bar&quot;, City) | by City | yield City | sort&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Barstow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Big Bar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Diamond Bar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Long Barn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Santa Barbara</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sawyers Bar</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Somes Bar</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>In this example, we use the <a href="#8-value-construction">yield operator</a> here to pull
the <code>City</code> field out of the record result and we used <code>-f text</code> to output the
results in &quot;text&quot; format instead of ZSON so the strings are printed
without quotes.  The text format is often useful for piping the output to
other Unix tools that might not expect quotes.</p><p>When the keyword you want to search for doesn&#x27;t fit into the keyword syntax,
i.e., it has spaces or special characters, you should use a
<a href="#34-literal-search">literal string search</a>.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="32-globs">3.2 Globs<a class="hash-link" href="#32-globs" title="Direct link to heading">‚Äã</a></h3><p>To find values that may contain arbitrary substrings between or alongside the
desired word(s), one or more
<a href="https://en.wikipedia.org/wiki/Glob_(programming)" target="_blank" rel="noopener noreferrer">glob</a>-style wildcards can be
used.</p><p>For example, the following search finds records that contain school names
that have some additional text between <code>ACE</code> and <code>Academy</code>:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;ACE*Academy&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;ACE Empower Academy&quot;,District:&quot;Santa Clara County Office of Education&quot;,City:&quot;San Jose&quot;,County:&quot;Santa Clara&quot;,Zip:&quot;95116-3423&quot;,Latitude:37.348601,Longitude:-121.8446,Magnet:false,OpenDate:2008-08-26T00:00:00Z,ClosedDate:null(time),Phone:&quot;(408) 729-3920&quot;,StatusType:&quot;Active&quot;,Website:&quot;www.acecharter.org&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;ACE Inspire Academy&quot;,District:&quot;San Jose Unified&quot;,City:&quot;San Jose&quot;,County:&quot;Santa Clara&quot;,Zip:&quot;95112-6334&quot;,Latitude:37.350981,Longitude:-121.87205,Magnet:false,OpenDate:2015-08-03T00:00:00Z,ClosedDate:null(time),Phone:&quot;(408) 295-6008&quot;,StatusType:&quot;Active&quot;,Website:&quot;www.acecharter.org&quot;}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Glob wildcards only have effect when used within <a href="#31-keyword-search">keywords</a>
searches. An asterisk in a <a href="#34-literal-search">string literal search</a> will match
using the literal asterisk character embedded in the string.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="33-regular-expressions">3.3 Regular Expressions<a class="hash-link" href="#33-regular-expressions" title="Direct link to heading">‚Äã</a></h3><p>For pattern matching beyond <a href="#32-globs">glob wildcards</a>,
regular expressions (regexps) are also
available. To use them, simply place a <code>/</code> character before and after the
regexp.</p><p>For example, since there are many high schools in our sample data, to find
only records containing strings that <em>begin</em> with the word <code>High</code>:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;/^High /&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;High Desert&quot;,District:&quot;Soledad-Agua Dulce Union Eleme&quot;,City:&quot;Acton&quot;,County:&quot;Los Angeles&quot;,Zip:&quot;93510&quot;,Latitude:34.490977,Longitude:-118.19646,Magnet:false,OpenDate:1980-07-01T00:00:00Z,ClosedDate:1993-06-30T00:00:00Z,Phone:null(string),StatusType:&quot;Merged&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;High Desert&quot;,District:&quot;Acton-Agua Dulce Unified&quot;,City:&quot;Acton&quot;,County:&quot;Los Angeles&quot;,Zip:&quot;93510-1757&quot;,Latitude:34.492578,Longitude:-118.19039,Magnet:false,OpenDate:1980-07-01T00:00:00Z,ClosedDate:null(time),Phone:&quot;(661) 269-0310&quot;,StatusType:&quot;Active&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;High Desert Academy&quot;,District:&quot;Eastern Sierra Unified&quot;,City:&quot;Benton&quot;,County:&quot;Mono&quot;,Zip:&quot;93512-0956&quot;,Latitude:37.818597,Longitude:-118.47712,Magnet:null(bool),OpenDate:1996-09-03T00:00:00Z,ClosedDate:2012-06-30T00:00:00Z,Phone:null(string),StatusType:&quot;Closed&quot;,Website:&quot;www.esusd.org&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;High Desert Academy of Applied Arts and Sciences&quot;,District:&quot;Victor Valley Union High&quot;,City:&quot;Victorville&quot;,County:&quot;San Bernardino&quot;,Zip:&quot;92394&quot;,Latitude:34.531144,Longitude:-117.31697,Magnet:null(bool),OpenDate:2004-09-07T00:00:00Z,ClosedDate:2011-06-30T00:00:00Z,Phone:null(string),StatusType:&quot;Closed&quot;,Website:&quot;www.hdaaas.org&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Further details for regular expressions are available in
the <a href="/docs/language/overview#711-regular-expressions">Zed language documention</a>.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="34-literal-search">3.4 Literal Search<a class="hash-link" href="#34-literal-search" title="Direct link to heading">‚Äã</a></h3><p>Sometimes you want to search for values that aren&#x27;t strings, e.g., numbers
or IP addresses.  Zed can search for any
<a href="/docs/formats/zed#1-primitive-types">primitive-type</a> value just typing
that value like a keyword.   In this case, the search looks for
both fields of the value&#x27;s type for an exact match as well as a substring
match for the value as typed in any strings encountered.</p><p>For example, searching across both our school and test score data sources for
the number <code>596</code> matches records that contain numeric fields of this precise value
(such as from the test scores) and also records that contain string fields
(such as the ZIP code and phone number fields in the school data), e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;596&#x27; testscores.zson schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>finds these records</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{AvgScrMath:591(uint16),AvgScrRead:610(uint16),AvgScrWrite:596(uint16),cname:&quot;Los Angeles&quot;,dname:&quot;William S. Hart Union High&quot;,sname:&quot;Academy of the Canyons&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{AvgScrMath:614(uint16),AvgScrRead:596(uint16),AvgScrWrite:592(uint16),cname:&quot;Alameda&quot;,dname:&quot;Pleasanton Unified&quot;,sname:&quot;Amador Valley High&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{AvgScrMath:620(uint16),AvgScrRead:596(uint16),AvgScrWrite:590(uint16),cname:&quot;Yolo&quot;,dname:&quot;Davis Joint Unified&quot;,sname:&quot;Davis Senior High&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Achieve Charter School of Paradise Inc.&quot;,District:&quot;Paradise Unified&quot;,City:&quot;Paradise&quot;,County:&quot;Butte&quot;,Zip:&quot;95969-3913&quot;,Latitude:39.760323,Longitude:-121.62078,Magnet:false,OpenDate:2005-09-12T00:00:00Z,ClosedDate:null(time),Phone:&quot;(530) 872-4100&quot;,StatusType:&quot;Active&quot;,Website:&quot;www.achievecharter.org&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Alliance Ouchi-O&#x27;Donovan 6-12 Complex&quot;,District:&quot;Los Angeles Unified&quot;,City:&quot;Los Angeles&quot;,County:&quot;Los Angeles&quot;,Zip:&quot;90043-2622&quot;,Latitude:33.993484,Longitude:-118.32246,Magnet:false,OpenDate:2006-09-05T00:00:00Z,ClosedDate:null(time),Phone:&quot;(323) 596-2290&quot;,StatusType:&quot;Active&quot;,Website:&quot;http://ouchihs.org&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Literal search also works for string values.  This is useful when the
string value to search cannot be represented as a keyword due to embedded
spaces or special characters.</p><p>Let&#x27;s say we&#x27;ve noticed that a couple of the school names in our sample data
include the string <code>Defunct=</code>. An attempt to enter this as a <a href="#31-keyword-search">keyword</a>
search causes a parse error, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;Defunct=&#x27; *.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq: error parsing Zed at column 8:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Defunct=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   === ^ ===</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>However, wrapping in quotes to performa a string-literal search
gives the desired result:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;&quot;Defunct=&quot;&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Lincoln Elem &#x27;Defunct=&quot;,District:&quot;Modesto City Elementary&quot;,City:null(string),County:&quot;Stanislaus&quot;,Zip:null(string),Latitude:null(float64),Longitude:null(float64),Magnet:null(bool),OpenDate:1980-07-01T00:00:00Z,ClosedDate:1989-06-30T00:00:00Z,Phone:null(string),StatusType:&quot;Closed&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Lovell Elem &#x27;Defunct=&quot;,District:&quot;Cutler-Orosi Joint Unified&quot;,City:null(string),County:&quot;Tulare&quot;,Zip:null(string),Latitude:null(float64),Longitude:null(float64),Magnet:null(bool),OpenDate:1980-07-01T00:00:00Z,ClosedDate:1989-06-30T00:00:00Z,Phone:null(string),StatusType:&quot;Closed&quot;,Website:null(string)}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Quoted strings are particularly handy when you&#x27;re looking for long, specific
strings that may have several special characters in them. For example, let&#x27;s
say we&#x27;re looking for information on the Union Hill Elementary district.
Entered without quotes, we end up matching far more records than we intended
since each space character between words is treated as a <a href="#541-and">Boolean <code>and</code></a>, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;Union Hill Elementary&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;A. M. Thomas Middle&quot;,District:&quot;Lost Hills Union Elementary&quot;,City:&quot;Lost Hills&quot;,County:&quot;Kern&quot;,Zip:&quot;93249-0158&quot;,Latitude:35.615269,Longitude:-119.69955,Magnet:false,OpenDate:1980-07-01T00:00:00Z,ClosedDate:null(time),Phone:&quot;(661) 797-2626&quot;,StatusType:&quot;Active&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Alview Elementary&quot;,District:&quot;Alview-Dairyland Union Elementary&quot;,City:&quot;Chowchilla&quot;,County:&quot;Madera&quot;,Zip:&quot;93610-9225&quot;,Latitude:37.050632,Longitude:-120.4734,Magnet:false,OpenDate:1980-07-01T00:00:00Z,ClosedDate:null(time),Phone:&quot;(559) 665-2275&quot;,StatusType:&quot;Active&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Anaverde Hills&quot;,District:&quot;Westside Union Elementary&quot;,City:&quot;Palmdale&quot;,County:&quot;Los Angeles&quot;,Zip:&quot;93551-5518&quot;,Latitude:34.564651,Longitude:-118.18012,Magnet:false,OpenDate:2005-08-15T00:00:00Z,ClosedDate:null(time),Phone:&quot;(661) 575-9923&quot;,StatusType:&quot;Active&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Apple Blossom&quot;,District:&quot;Twin Hills Union Elementary&quot;,City:&quot;Sebastopol&quot;,County:&quot;Sonoma&quot;,Zip:&quot;95472-3917&quot;,Latitude:38.387396,Longitude:-122.84954,Magnet:false,OpenDate:1980-07-01T00:00:00Z,ClosedDate:null(time),Phone:&quot;(707) 823-1041&quot;,StatusType:&quot;Active&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>However, wrapping the entire search term in quotes allows us to search for the
complete string, including the spaces, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;&quot;Union Hill Elementary&quot;&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Highland Oaks Elementary&quot;,District:&quot;Union Hill Elementary&quot;,City:&quot;Grass Valley&quot;,County:&quot;Nevada&quot;,Zip:&quot;95945&quot;,Latitude:null(float64),Longitude:null(float64),Magnet:null(bool),OpenDate:1997-09-02T00:00:00Z,ClosedDate:2003-07-02T00:00:00Z,Phone:null(string),StatusType:&quot;Closed&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Union Hill 3R Community Day&quot;,District:&quot;Union Hill Elementary&quot;,City:&quot;Grass Valley&quot;,County:&quot;Nevada&quot;,Zip:&quot;95945&quot;,Latitude:39.229055,Longitude:-121.07127,Magnet:null(bool),OpenDate:2003-08-20T00:00:00Z,ClosedDate:2011-06-30T00:00:00Z,Phone:null(string),StatusType:&quot;Closed&quot;,Website:&quot;www.uhsd.k12.ca.us&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Union Hill Charter Home&quot;,District:&quot;Union Hill Elementary&quot;,City:&quot;Grass Valley&quot;,County:&quot;Nevada&quot;,Zip:&quot;95945-8805&quot;,Latitude:39.204457,Longitude:-121.03829,Magnet:false,OpenDate:1995-07-14T00:00:00Z,ClosedDate:2015-06-30T00:00:00Z,Phone:null(string),StatusType:&quot;Closed&quot;,Website:&quot;www.uhsd.k12.ca.us&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Union Hill Elementary&quot;,District:&quot;Union Hill Elementary&quot;,City:&quot;Grass Valley&quot;,County:&quot;Nevada&quot;,Zip:&quot;95945-8805&quot;,Latitude:39.204457,Longitude:-121.03829,Magnet:false,OpenDate:1980-07-01T00:00:00Z,ClosedDate:null(time),Phone:&quot;(530) 273-8456&quot;,StatusType:&quot;Active&quot;,Website:&quot;www.uhsd.k12.ca.us&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Union Hill Middle&quot;,District:&quot;Union Hill Elementary&quot;,City:&quot;Grass Valley&quot;,County:&quot;Nevada&quot;,Zip:&quot;94945-8805&quot;,Latitude:39.205006,Longitude:-121.03778,Magnet:false,OpenDate:2013-08-14T00:00:00Z,ClosedDate:null(time),Phone:&quot;(530) 273-8456&quot;,StatusType:&quot;Active&quot;,Website:&quot;www.uhsd.k12.ca.us&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:null(string),District:&quot;Union Hill Elementary&quot;,City:&quot;Grass Valley&quot;,County:&quot;Nevada&quot;,Zip:&quot;95945-8730&quot;,Latitude:39.208869,Longitude:-121.03551,Magnet:null(bool),OpenDate:null(time),ClosedDate:null(time),Phone:&quot;(530) 273-0647&quot;,StatusType:&quot;Active&quot;,Website:&quot;www.uhsd.k12.ca.us&quot;}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="35-predicate-search">3.5 Predicate Search<a class="hash-link" href="#35-predicate-search" title="Direct link to heading">‚Äã</a></h3><p>Search terms can also be include Boolean predicates adhering
to Zed&#x27;s <a href="/docs/language/overview#6-expressions">expression syntax</a>.</p><p>In particular, a search result can be narrowed down
to include only records that contain a
certain value in a particular named field. For example, the following search
will only match records containing the field called <code>District</code> where it is set
to the precise string value <code>Winton</code>:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;District==&quot;Winton&quot;&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Frank Sparkes Elementary&quot;,District:&quot;Winton&quot;,City:&quot;Winton&quot;,County:&quot;Merced&quot;,Zip:&quot;95388-0008&quot;,Latitude:37.382084,Longitude:-120.61847,Magnet:false,OpenDate:1980-07-01T00:00:00Z,ClosedDate:null(time),Phone:&quot;(209) 357-6180&quot;,StatusType:&quot;Active&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Sybil N. Crookham Elementary&quot;,District:&quot;Winton&quot;,City:&quot;Winton&quot;,County:&quot;Merced&quot;,Zip:&quot;95388-0130&quot;,Latitude:37.389501,Longitude:-120.61636,Magnet:false,OpenDate:1980-07-01T00:00:00Z,ClosedDate:null(time),Phone:&quot;(209) 357-6182&quot;,StatusType:&quot;Active&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Winfield Elementary&quot;,District:&quot;Winton&quot;,City:&quot;Winton&quot;,County:&quot;Merced&quot;,Zip:&quot;95388&quot;,Latitude:37.389121,Longitude:-120.60442,Magnet:false,OpenDate:2007-08-13T00:00:00Z,ClosedDate:null(time),Phone:&quot;(209) 357-6891&quot;,StatusType:&quot;Active&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Winton Middle&quot;,District:&quot;Winton&quot;,City:&quot;Winton&quot;,County:&quot;Merced&quot;,Zip:&quot;95388-1477&quot;,Latitude:37.379938,Longitude:-120.62263,Magnet:false,OpenDate:1990-07-20T00:00:00Z,ClosedDate:null(time),Phone:&quot;(209) 357-6189&quot;,StatusType:&quot;Active&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:null(string),District:&quot;Winton&quot;,City:&quot;Winton&quot;,County:&quot;Merced&quot;,Zip:&quot;95388-0008&quot;,Latitude:37.389467,Longitude:-120.6147,Magnet:null(bool),OpenDate:null(time),ClosedDate:null(time),Phone:&quot;(209) 357-6175&quot;,StatusType:&quot;Active&quot;,Website:&quot;www.winton.k12.ca.us&quot;}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Because the right-hand-side value to which we were comparing was a string, it
was necessary to wrap it in quotes. If this string were written as a keyword,
it would have been interpreted as a field name as
Zed <a href="/docs/language/overview#24-implied-field-references">field references</a>
look like keywords in the context of an expression.</p><p>For example, to see the records in which the school and district name are the
same:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;District==School&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Adelanto Elementary&quot;,District:&quot;Adelanto Elementary&quot;,City:&quot;Adelanto&quot;,County:&quot;San Bernardino&quot;,Zip:&quot;92301-1734&quot;,Latitude:34.576166,Longitude:-117.40944,Magnet:false,OpenDate:1980-07-01T00:00:00Z,ClosedDate:null(time),Phone:&quot;(760) 246-5892&quot;,StatusType:&quot;Active&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Allensworth Elementary&quot;,District:&quot;Allensworth Elementary&quot;,City:&quot;Allensworth&quot;,County:&quot;Tulare&quot;,Zip:&quot;93219-9709&quot;,Latitude:35.864487,Longitude:-119.39068,Magnet:false,OpenDate:1980-07-01T00:00:00Z,ClosedDate:null(time),Phone:&quot;(661) 849-2401&quot;,StatusType:&quot;Active&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Alta Loma Elementary&quot;,District:&quot;Alta Loma Elementary&quot;,City:&quot;Alta Loma&quot;,County:&quot;San Bernardino&quot;,Zip:&quot;91701-5007&quot;,Latitude:34.12597,Longitude:-117.59744,Magnet:false,OpenDate:1980-07-01T00:00:00Z,ClosedDate:null(time),Phone:&quot;(909) 484-5000&quot;,StatusType:&quot;Active&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="351-type-dependence">3.5.1 Type Dependence<a class="hash-link" href="#351-type-dependence" title="Direct link to heading">‚Äã</a></h4><p>When comparing values to the named fields,
the value must be comparable to the <em>data type</em> of the field.</p><p>For instance, the &quot;Zip&quot; field in the schools data is a <code>string</code> rather than
a number because of the extended ZIP+4 format that includes a hyphen and four
additional digits and hence could not be represented in a numeric type, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;cut Zip&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{Zip:&quot;95959&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{Zip:&quot;94607-1404&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{Zip:&quot;92395-3360&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Because Zed does not coerce strings to numbers in expressions,
the predicate <code>Zip==95959</code> would <em>not</em>
match the top record shown, since Zed recognizes the bare value <code>95959</code> as a
number before comparing it to all the fields named <code>Zip</code>.
However, <code>Zip==&quot;95959&quot;</code> <em>would</em> match, since the quotes cause Zed
to treat the value as a string.</p><p>When confronted with messy data like this, you can usually cleaned it up
to achieve the intent of your searches.  For example, the dash suffix
of the ZIP codes could be dropped, the string converted to an integer, then
integer comparisons performed, i.e.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;cut Zip | int64(Zip[0:5])==94607&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{Zip:&quot;94607-1404&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="352-grep-predicates">3.5.2 Grep Predicates<a class="hash-link" href="#352-grep-predicates" title="Direct link to heading">‚Äã</a></h4><p>When comparing a named field to a literal string, the quoted value is treated as
an <em>exact</em> match.</p><p>For example, let&#x27;s say we know there are several school names that start with
<code>Luther</code> but only a couple district names that do. Because <code>Luther</code> only appears
as a <em>substring</em> of the district names in our sample data, the following example
produces no output, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;District==&quot;Luther&quot;&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces an empty output</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>To perform string searches inside of nested values, we can utilize the
<a href="/docs/language/functions/grep">grep function</a> with
a <a href="#32-globs">glob</a>, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;grep(Luther*, District)&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Luther Burbank Elementary&quot;,District:&quot;Luther Burbank&quot;,City:&quot;San Jose&quot;,County:&quot;Santa Clara&quot;,Zip:&quot;95128-1931&quot;,Latitude:37.323556,Longitude:-121.9267,Magnet:false,OpenDate:1980-07-01T00:00:00Z,ClosedDate:null(time),Phone:&quot;(408) 295-1814&quot;,StatusType:&quot;Active&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:null(string),District:&quot;Luther Burbank&quot;,City:&quot;San Jose&quot;,County:&quot;Santa Clara&quot;,Zip:&quot;95128-1931&quot;,Latitude:37.323556,Longitude:-121.9267,Magnet:null(bool),OpenDate:null(time),ClosedDate:null(time),Phone:&quot;(408) 295-2450&quot;,StatusType:&quot;Active&quot;,Website:&quot;www.lbsd.k12.ca.us&quot;}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p><a href="#33-regular-expressions">Regular expressions</a> can also be used with <code>grep</code>, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;grep(/^Sunset (Ranch|Ridge) Elementary/, School)&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Sunset Ranch Elementary&quot;,District:&quot;Rocklin Unified&quot;,City:&quot;Rocklin&quot;,County:&quot;Placer&quot;,Zip:&quot;95765-5441&quot;,Latitude:38.826425,Longitude:-121.2864,Magnet:false,OpenDate:2010-08-17T00:00:00Z,ClosedDate:null(time),Phone:&quot;(916) 624-2048&quot;,StatusType:&quot;Active&quot;,Website:&quot;www.rocklin.k12.ca.us&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Sunset Ridge Elementary&quot;,District:&quot;Pacifica&quot;,City:&quot;Pacifica&quot;,County:&quot;San Mateo&quot;,Zip:&quot;94044-2029&quot;,Latitude:37.653836,Longitude:-122.47919,Magnet:false,OpenDate:1980-07-01T00:00:00Z,ClosedDate:null(time),Phone:&quot;(650) 738-6687&quot;,StatusType:&quot;Active&quot;,Website:null(string)}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="353-containment">3.5.3 Containment<a class="hash-link" href="#353-containment" title="Direct link to heading">‚Äã</a></h4><p>Rather than testing for strict equality or pattern matches, you may want to
determine if a value is among the many possible elements of a complex field.
This is performed with <code>in</code>.</p><p>Since our sample data doesn&#x27;t contain complex fields, we&#x27;ll make one by
using the <a href="/docs/language/aggregates/union"><code>union</code></a> aggregate function to
create a <a href="/docs/formats/zson#243-set-value"><code>set</code></a>-typed
field called <code>Schools</code> that contains all unique school names per district. From
these we&#x27;ll find each set that contains a school named <code>Lincoln Elementary</code>, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -Z &#x27;Schools:=union(School) by District | &quot;Lincoln Elementary&quot; in Schools | sort this&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    District: &quot;Tulare City&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Schools: |[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Alpine Vista&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Mulcahy Middle&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Tulare Support&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Live Oak Middle&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Los Tules Middle&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Maple Elementary&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Garden Elementary&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Wilson Elementary&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Cypress Elementary&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Lincoln Elementary&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Heritage Elementary&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Pleasant Elementary&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Cherry Avenue Middle&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Roosevelt Elementary&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Frank Kohn Elementary&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Mission Valley Elementary&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Tulare City Community Day&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="354-comparisons">3.5.4 Comparisons<a class="hash-link" href="#354-comparisons" title="Direct link to heading">‚Äã</a></h4><p>In addition to testing for equality via <code>==</code> and testing containment via
<code>in</code>, the other common methods of comparison <code>!=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, and
<code>&gt;=</code> are also available.</p><p>For example, the following search finds the schools that reported the highest
math test scores,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;AvgScrMath &gt; 690&#x27; testscores.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{AvgScrMath:698(uint16),AvgScrRead:639(uint16),AvgScrWrite:664(uint16),cname:&quot;Santa Clara&quot;,dname:&quot;Fremont Union High&quot;,sname:&quot;Lynbrook High&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{AvgScrMath:699(uint16),AvgScrRead:653(uint16),AvgScrWrite:671(uint16),cname:&quot;Alameda&quot;,dname:&quot;Fremont Unified&quot;,sname:&quot;Mission San Jose High&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{AvgScrMath:691(uint16),AvgScrRead:638(uint16),AvgScrWrite:657(uint16),cname:&quot;Santa Clara&quot;,dname:&quot;Fremont Union High&quot;,sname:&quot;Monta Vista High&quot;}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The same approach can be used to compare characters in <code>string</code>-type values,
such as this search that finds school names at the end of the alphabet, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;School &gt; &quot;Z&quot;&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Zamora Elementary&quot;,District:&quot;Woodland Joint Unified&quot;,City:&quot;Woodland&quot;,County:&quot;Yolo&quot;,Zip:&quot;95695-5137&quot;,Latitude:38.658609,Longitude:-121.79355,Magnet:false,OpenDate:1980-07-01T00:00:00Z,ClosedDate:null(time),Phone:&quot;(530) 666-3641&quot;,StatusType:&quot;Active&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Zamorano Elementary&quot;,District:&quot;San Diego Unified&quot;,City:&quot;San Diego&quot;,County:&quot;San Diego&quot;,Zip:&quot;92139-2989&quot;,Latitude:32.680338,Longitude:-117.03864,Magnet:true,OpenDate:1980-07-01T00:00:00Z,ClosedDate:null(time),Phone:&quot;(619) 430-1400&quot;,StatusType:&quot;Active&quot;,Website:&quot;http://new.sandi.net/schools/zamorano&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Zane (Catherine L.) Junior High&quot;,District:&quot;Eureka City High&quot;,City:&quot;Eureka&quot;,County:&quot;Humboldt&quot;,Zip:&quot;95501-3140&quot;,Latitude:40.788118,Longitude:-124.14903,Magnet:false,OpenDate:1980-07-01T00:00:00Z,ClosedDate:1998-06-30T00:00:00Z,Phone:null(string),StatusType:&quot;Merged&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="36-boolean-logic">3.6 Boolean Logic<a class="hash-link" href="#36-boolean-logic" title="Direct link to heading">‚Äã</a></h3><p>Search terms can be combined with Boolean logic as detailed in
the <a href="/docs/language/overview#73-boolean-logic">Zed language documentation</a>.</p><p>In particular, search terms separated by blank space implies
Boolean <code>and</code> between the concatenated terms.</p><p>Let&#x27;s say we&#x27;re earching for information about academies
that are flagged as being in a <code>Pending</code> status.  We can simply concatenate
the predicate for &quot;Pending&quot; and the keyword search for <code>academy</code>, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;StatusType==&quot;Pending&quot; academy&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Equitas Academy 4&quot;,District:&quot;Los Angeles Unified&quot;,City:&quot;Los Angeles&quot;,County:&quot;Los Angeles&quot;,Zip:&quot;90015-2412&quot;,Latitude:34.044837,Longitude:-118.27844,Magnet:false,OpenDate:2017-09-01T00:00:00Z,ClosedDate:null(time),Phone:&quot;(213) 201-0440&quot;,StatusType:&quot;Pending&quot;,Website:&quot;http://equitasacademy.org&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Pinnacle Academy Charter - Independent Study&quot;,District:&quot;South Monterey County Joint Union High&quot;,City:&quot;King City&quot;,County:&quot;Monterey&quot;,Zip:&quot;93930-3311&quot;,Latitude:36.208934,Longitude:-121.13286,Magnet:false,OpenDate:2016-08-08T00:00:00Z,ClosedDate:null(time),Phone:&quot;(831) 385-4661&quot;,StatusType:&quot;Pending&quot;,Website:&quot;www.smcjuhsd.org&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Rocketship Futuro Academy&quot;,District:&quot;SBE - Rocketship Futuro Academy&quot;,City:&quot;Concord&quot;,County:&quot;Contra Costa&quot;,Zip:&quot;94521-1522&quot;,Latitude:37.965658,Longitude:-121.96106,Magnet:false,OpenDate:2016-08-15T00:00:00Z,ClosedDate:null(time),Phone:&quot;(301) 789-5469&quot;,StatusType:&quot;Pending&quot;,Website:&quot;www.rsed.org&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Sherman Thomas STEM Academy&quot;,District:&quot;Madera Unified&quot;,City:&quot;Madera&quot;,County:&quot;Madera&quot;,Zip:&quot;93638&quot;,Latitude:36.982843,Longitude:-120.06665,Magnet:false,OpenDate:2017-08-09T00:00:00Z,ClosedDate:null(time),Phone:&quot;(559) 674-1192&quot;,StatusType:&quot;Pending&quot;,Website:&quot;www.stcs.k12.ca.us&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:null(string),District:&quot;SBE - Rocketship Futuro Academy&quot;,City:&quot;Concord&quot;,County:&quot;Contra Costa&quot;,Zip:&quot;94521-1522&quot;,Latitude:37.965658,Longitude:-121.96106,Magnet:null(bool),OpenDate:null(time),ClosedDate:null(time),Phone:&quot;(301) 789-5469&quot;,StatusType:&quot;Pending&quot;,Website:&quot;www.rsed.org&quot;}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Of course, the logical AND may also be explicit and the above query
can be written explicitly as</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">StatusType==&quot;Pending&quot; and academy</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>You can also combine predicates in a logical OR.
Let&#x27;a revisit two of our previous example searches that each only
returned a couple records, searching now with <code>or</code> to see them all at once,
e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;&quot;Defunct=&quot; or ACE*Academy&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;ACE Empower Academy&quot;,District:&quot;Santa Clara County Office of Education&quot;,City:&quot;San Jose&quot;,County:&quot;Santa Clara&quot;,Zip:&quot;95116-3423&quot;,Latitude:37.348601,Longitude:-121.8446,Magnet:false,OpenDate:2008-08-26T00:00:00Z,ClosedDate:null(time),Phone:&quot;(408) 729-3920&quot;,StatusType:&quot;Active&quot;,Website:&quot;www.acecharter.org&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;ACE Inspire Academy&quot;,District:&quot;San Jose Unified&quot;,City:&quot;San Jose&quot;,County:&quot;Santa Clara&quot;,Zip:&quot;95112-6334&quot;,Latitude:37.350981,Longitude:-121.87205,Magnet:false,OpenDate:2015-08-03T00:00:00Z,ClosedDate:null(time),Phone:&quot;(408) 295-6008&quot;,StatusType:&quot;Active&quot;,Website:&quot;www.acecharter.org&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Lincoln Elem &#x27;Defunct=&quot;,District:&quot;Modesto City Elementary&quot;,City:null(string),County:&quot;Stanislaus&quot;,Zip:null(string),Latitude:null(float64),Longitude:null(float64),Magnet:null(bool),OpenDate:1980-07-01T00:00:00Z,ClosedDate:1989-06-30T00:00:00Z,Phone:null(string),StatusType:&quot;Closed&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Lovell Elem &#x27;Defunct=&quot;,District:&quot;Cutler-Orosi Joint Unified&quot;,City:null(string),County:&quot;Tulare&quot;,Zip:null(string),Latitude:null(float64),Longitude:null(float64),Magnet:null(bool),OpenDate:1980-07-01T00:00:00Z,ClosedDate:1989-06-30T00:00:00Z,Phone:null(string),StatusType:&quot;Closed&quot;,Website:null(string)}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Use <code>not</code> to invert the matching logic in the term that comes to the right of
it in your search.</p><p>For example, to find schools in the <code>Dixon Unified</code> district <em>other than</em>
elementary schools, we invert the logic of a search term:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;not elementary District==&quot;Dixon Unified&quot;&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;C. A. Jacobs Intermediate&quot;,District:&quot;Dixon Unified&quot;,City:&quot;Dixon&quot;,County:&quot;Solano&quot;,Zip:&quot;95620-3209&quot;,Latitude:38.446472,Longitude:-121.83631,Magnet:false,OpenDate:1980-07-01T00:00:00Z,ClosedDate:null(time),Phone:&quot;(707) 693-6350&quot;,StatusType:&quot;Active&quot;,Website:&quot;www.dixonusd.org&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Dixon Adult&quot;,District:&quot;Dixon Unified&quot;,City:&quot;Dixon&quot;,County:&quot;Solano&quot;,Zip:&quot;95620&quot;,Latitude:38.444818,Longitude:-121.82287,Magnet:null(bool),OpenDate:1996-09-09T00:00:00Z,ClosedDate:2016-06-30T00:00:00Z,Phone:null(string),StatusType:&quot;Closed&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Dixon Community Day&quot;,District:&quot;Dixon Unified&quot;,City:&quot;Dixon&quot;,County:&quot;Solano&quot;,Zip:&quot;95620&quot;,Latitude:38.44755,Longitude:-121.82001,Magnet:false,OpenDate:2003-08-23T00:00:00Z,ClosedDate:null(time),Phone:&quot;(707) 693-6340&quot;,StatusType:&quot;Active&quot;,Website:&quot;www.dixonusd.org&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Dixon High&quot;,District:&quot;Dixon Unified&quot;,City:&quot;Dixon&quot;,County:&quot;Solano&quot;,Zip:&quot;95620-9301&quot;,Latitude:38.436088,Longitude:-121.81672,Magnet:false,OpenDate:1980-07-01T00:00:00Z,ClosedDate:null(time),Phone:&quot;(707) 693-6330&quot;,StatusType:&quot;Active&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Dixon Montessori Charter&quot;,District:&quot;Dixon Unified&quot;,City:&quot;Dixon&quot;,County:&quot;Solano&quot;,Zip:&quot;95620-2702&quot;,Latitude:38.447984,Longitude:-121.83186,Magnet:false,OpenDate:2010-08-11T00:00:00Z,ClosedDate:null(time),Phone:&quot;(707) 678-8953&quot;,StatusType:&quot;Active&quot;,Website:&quot;www.dixonmontessori.org&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Dixon Unified Alter. Educ.&quot;,District:&quot;Dixon Unified&quot;,City:&quot;Dixon&quot;,County:&quot;Solano&quot;,Zip:&quot;95620&quot;,Latitude:null(float64),Longitude:null(float64),Magnet:null(bool),OpenDate:1993-08-26T00:00:00Z,ClosedDate:1994-06-30T00:00:00Z,Phone:null(string),StatusType:&quot;Closed&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;Maine Prairie High (Continuation)&quot;,District:&quot;Dixon Unified&quot;,City:&quot;Dixon&quot;,County:&quot;Solano&quot;,Zip:&quot;95620-3019&quot;,Latitude:38.447549,Longitude:-121.81986,Magnet:false,OpenDate:1980-07-01T00:00:00Z,ClosedDate:null(time),Phone:&quot;(707) 693-6340&quot;,StatusType:&quot;Active&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:null(string),District:&quot;Dixon Unified&quot;,City:&quot;Dixon&quot;,County:&quot;Solano&quot;,Zip:&quot;95620-3447&quot;,Latitude:38.44468,Longitude:-121.82249,Magnet:null(bool),OpenDate:null(time),ClosedDate:null(time),Phone:&quot;(707) 693-6300&quot;,StatusType:&quot;Active&quot;,Website:&quot;www.dixonusd.org&quot;}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Note that <code>!</code> can also be used as alternative shorthand for <code>not</code>, e.g.,</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">! elementary District==&quot;Dixon Unified&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="361-logical-grouping">3.6.1 Logical Grouping<a class="hash-link" href="#361-logical-grouping" title="Direct link to heading">‚Äã</a></h4><p>Unless wrapped in parentheses, a search is evaluated in <em>left-to-right order</em>.
Terms wrapped in parentheses will be evaluated <em>first</em>, overriding the default
left-to-right evaluation.</p><p>For example, we&#x27;ve noticed there are some test score records that have <code>null</code>
values for all three test scores:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;AvgScrMath==null AvgScrRead==null AvgScrWrite==null&#x27; testscores.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{AvgScrMath:null(uint16),AvgScrRead:null(uint16),AvgScrWrite:null(uint16),cname:&quot;Riverside&quot;,dname:&quot;Beaumont Unified&quot;,sname:&quot;21st Century Learning Institute&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{AvgScrMath:null(uint16),AvgScrRead:null(uint16),AvgScrWrite:null(uint16),cname:&quot;Los Angeles&quot;,dname:&quot;ABC Unified&quot;,sname:&quot;ABC Secondary (Alternative)&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>We can easily filter these out by negating the search for these records, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;not (AvgScrMath==null AvgScrRead==null AvgScrWrite==null)&#x27; testscores.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{AvgScrMath:371(uint16),AvgScrRead:376(uint16),AvgScrWrite:368(uint16),cname:&quot;Los Angeles&quot;,dname:&quot;Los Angeles Unified&quot;,sname:&quot;APEX Academy&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{AvgScrMath:367(uint16),AvgScrRead:359(uint16),AvgScrWrite:369(uint16),cname:&quot;Alameda&quot;,dname:&quot;Oakland Unified&quot;,sname:&quot;ARISE High&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{AvgScrMath:491(uint16),AvgScrRead:489(uint16),AvgScrWrite:484(uint16),cname:&quot;Santa Clara&quot;,dname:&quot;San Jose Unified&quot;,sname:&quot;Abraham Lincoln High&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Parentheses can also be nested, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;grep(*High*, sname) and (not (AvgScrMath==null AvgScrRead==null AvgScrWrite==null) and dname==&quot;San Francisco Unified&quot;)&#x27; testscores.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{AvgScrMath:504(uint16),AvgScrRead:467(uint16),AvgScrWrite:467(uint16),cname:&quot;San Francisco&quot;,dname:&quot;San Francisco Unified&quot;,sname:&quot;Balboa High&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{AvgScrMath:480(uint16),AvgScrRead:443(uint16),AvgScrWrite:431(uint16),cname:&quot;San Francisco&quot;,dname:&quot;San Francisco Unified&quot;,sname:&quot;Burton (Phillip and Sala) Academic High&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{AvgScrMath:413(uint16),AvgScrRead:410(uint16),AvgScrWrite:395(uint16),cname:&quot;San Francisco&quot;,dname:&quot;San Francisco Unified&quot;,sname:&quot;City Arts and Tech High&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Except when writing the most common searches that leverage only the implicit
<code>and</code>, it&#x27;s generally good practice to use parentheses even when not strictly
necessary, just to make sure your queries clearly communicate their intended
logic.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="4-record-operators">4. Record Operators<a class="hash-link" href="#4-record-operators" title="Direct link to heading">‚Äã</a></h2><p>As with the data sets explored here, a very typical use case for Zed is
to operate over structured logs or events that are all represented as Zed records.
While Zed queries may operate over any sequence of values, the following operators
are designed specifically to work on sequences of records:</p><ul><li><a href="/docs/language/operators/cut">cut</a> - extract subsets of record fields into new records</li><li><a href="/docs/language/operators/drop">drop</a> - drop fields from record values</li><li><a href="/docs/language/operators/fuse">fuse</a> - coerce all input values into a merged type</li><li><a href="/docs/language/operators/put">put</a> - add or modify fields of records</li><li><a href="/docs/language/operators/rename">rename</a> - change the name of record fields</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="41-cut">4.1 <a href="/docs/language/operators/cut">cut</a><a class="hash-link" href="#41-cut" title="Direct link to heading">‚Äã</a></h3><p><code>cut</code> produces output records from input records containing only
the specified named fields.</p><p>This example returns only the name and opening date from our school records:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -Z &#x27;cut School,OpenDate&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    School: &quot;&#x27;3R&#x27; Middle&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    OpenDate: 1995-10-30T00:00:00Z</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    School: &quot;100 Black Men of the Bay Area Community&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    OpenDate: 2012-08-06T00:00:00Z</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>As long as some of the named fields are present, they are returned while absent
fields are <code>error(&quot;missing&quot;)</code>. For instance, the following
query is run against all three of our data sources and returns values from our
school data that includes fields for both <code>School</code> and <code>Website</code>, values from
our web address data that have the <code>Website</code> and <code>addr</code> fields, and the
missing value from the test score data since it has none of these fields:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;yosemiteuhsd | cut School,Website,addr&#x27; *.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{School:null(string),Website:&quot;www.yosemiteuhsd.com&quot;,addr:error(&quot;missing&quot;)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:error(&quot;missing&quot;),Website:&quot;www.yosemiteuhsd.com&quot;,addr:104.253.209.210}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Here, we return only the <code>sname</code> and <code>dname</code> fields of the test scores while also
renaming the fields:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;cut School:=sname,District:=dname&#x27; testscores.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;21st Century Learning Institute&quot;,District:&quot;Beaumont Unified&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;ABC Secondary (Alternative)&quot;,District:&quot;ABC Unified&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="42-drop">4.2 <a href="/docs/language/operators/drop">drop</a><a class="hash-link" href="#42-drop" title="Direct link to heading">‚Äã</a></h3><p><code>drop</code> produces output records from input records with the indicated
fields dropped from the output.</p><p>This example return all the fields <em>other than</em> the score values in our test score data:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;drop AvgScrMath,AvgScrRead,AvgScrWrite&#x27; testscores.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{cname:&quot;Riverside&quot;,dname:&quot;Beaumont Unified&quot;,sname:&quot;21st Century Learning Institute&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{cname:&quot;Los Angeles&quot;,dname:&quot;ABC Unified&quot;,sname:&quot;ABC Secondary (Alternative)&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="43-fuse">4.3 <a href="/docs/language/operators/fuse">fuse</a><a class="hash-link" href="#43-fuse" title="Direct link to heading">‚Äã</a></h3><p><code>fuse</code> produces output records from input records where the outputs
all have a uniform type consisting of a fusion of the input types.
Note that <code>fuse</code> operates in two passes: the first pass computes the
output type and the second pass tranforms the records.  Thus, all input
must be read before any output is produced.  If the input does not
fit in memory, it is spilled to temporary storage.</p><p>Let&#x27;s say you&#x27;d started with table-formatted output of all records in our data
that reference the town of Geyserville, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -f table &#x27;Geyserville&#x27; *.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">School                            District            City        County Zip        Latitude  Longitude  Magnet OpenDate             ClosedDate           Phone          StatusType Website</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Buena Vista High                  Geyserville Unified Geyserville Sonoma 95441-9670 38.722005 -122.89123 F      1980-07-01T00:00:00Z                      (707) 857-3592 Active     -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Geyserville Community Day         Geyserville Unified Geyserville Sonoma 95441      38.722005 -122.89123 -      2004-09-01T00:00:00Z 2010-06-30T00:00:00Z -              Closed     -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Geyserville Educational Park High Geyserville Unified Geyserville Sonoma 95441      38.722005 -122.89123 -      1980-07-01T00:00:00Z 2014-06-30T00:00:00Z -              Closed     -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Geyserville Elementary            Geyserville Unified Geyserville Sonoma 95441-0108 38.705895 -122.90296 F      1980-07-01T00:00:00Z                      (707) 857-3410 Active     www.gusd.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Geyserville Middle                Geyserville Unified Geyserville Sonoma 95441      38.722005 -122.89123 -      1980-07-01T00:00:00Z 2014-06-30T00:00:00Z -              Closed     -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Geyserville New Tech Academy      Geyserville Unified Geyserville Sonoma 95441-9670 38.72015  -122.88534 F      2014-07-01T00:00:00Z                      (707) 857-3592 Active     www.gusd.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-                                 Geyserville Unified Geyserville Sonoma 95441-9670 38.722005 -122.89123 -                                                (707) 857-3592 Active     www.gusd.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AvgScrMath AvgScrRead AvgScrWrite cname  dname               sname</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-          -          -           Sonoma Geyserville Unified Geyserville New Tech Academy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-          -          -           Sonoma Geyserville Unified -</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>School records were output first, so the preceding header row describes the
names of those fields. Later on, two test score records were also output, so
a header row describing its fields was also printed. This presentation
accurately conveys the heterogeneous nature of the data, but changing schemas
mid-stream is not allowed in formats such as CSV or other downstream tooling
such as SQL. Indeed, <code>zq</code> halts its output in this case, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -f csv &#x27;Geyserville&#x27; *.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">School,District,City,County,Zip,Latitude,Longitude,Magnet,OpenDate,ClosedDate,Phone,StatusType,Website</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Buena Vista High,Geyserville Unified,Geyserville,Sonoma,95441-9670,38.722005,-122.89123,false,1980-07-01T00:00:00Z,,(707) 857-3592,Active,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Geyserville Community Day,Geyserville Unified,Geyserville,Sonoma,95441,38.722005,-122.89123,,2004-09-01T00:00:00Z,2010-06-30T00:00:00Z,,Closed,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Geyserville Educational Park High,Geyserville Unified,Geyserville,Sonoma,95441,38.722005,-122.89123,,1980-07-01T00:00:00Z,2014-06-30T00:00:00Z,,Closed,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Geyserville Elementary,Geyserville Unified,Geyserville,Sonoma,95441-0108,38.705895,-122.90296,false,1980-07-01T00:00:00Z,,(707) 857-3410,Active,www.gusd.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Geyserville Middle,Geyserville Unified,Geyserville,Sonoma,95441,38.722005,-122.89123,,1980-07-01T00:00:00Z,2014-06-30T00:00:00Z,,Closed,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Geyserville New Tech Academy,Geyserville Unified,Geyserville,Sonoma,95441-9670,38.72015,-122.88534,false,2014-07-01T00:00:00Z,,(707) 857-3592,Active,www.gusd.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,Geyserville Unified,Geyserville,Sonoma,95441-9670,38.722005,-122.89123,,,,(707) 857-3592,Active,www.gusd.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CSV output requires uniform records but multiple types encountered (consider &#x27;fuse&#x27;)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>By using <code>fuse</code>, the unified schema of field names and types across all records
is assembled in a first pass through the data stream, which enables the
presentation of the results under a single, wider header row with no further
interruptions between the subsequent data rows, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -f csv &#x27;Geyserville | fuse&#x27; *.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">School,District,City,County,Zip,Latitude,Longitude,Magnet,OpenDate,ClosedDate,Phone,StatusType,Website,AvgScrMath,AvgScrRead,AvgScrWrite,cname,dname,sname</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Buena Vista High,Geyserville Unified,Geyserville,Sonoma,95441-9670,38.722005,-122.89123,false,1980-07-01T00:00:00Z,,(707) 857-3592,Active,,,,,,,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Geyserville Community Day,Geyserville Unified,Geyserville,Sonoma,95441,38.722005,-122.89123,,2004-09-01T00:00:00Z,2010-06-30T00:00:00Z,,Closed,,,,,,,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Geyserville Educational Park High,Geyserville Unified,Geyserville,Sonoma,95441,38.722005,-122.89123,,1980-07-01T00:00:00Z,2014-06-30T00:00:00Z,,Closed,,,,,,,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Geyserville Elementary,Geyserville Unified,Geyserville,Sonoma,95441-0108,38.705895,-122.90296,false,1980-07-01T00:00:00Z,,(707) 857-3410,Active,www.gusd.com,,,,,,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Geyserville Middle,Geyserville Unified,Geyserville,Sonoma,95441,38.722005,-122.89123,,1980-07-01T00:00:00Z,2014-06-30T00:00:00Z,,Closed,,,,,,,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Geyserville New Tech Academy,Geyserville Unified,Geyserville,Sonoma,95441-9670,38.72015,-122.88534,false,2014-07-01T00:00:00Z,,(707) 857-3592,Active,www.gusd.com,,,,,,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,Geyserville Unified,Geyserville,Sonoma,95441-9670,38.722005,-122.89123,,,,(707) 857-3592,Active,www.gusd.com,,,,,,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,,,,,,,,,,,,,,,,Sonoma,Geyserville Unified,Geyserville New Tech Academy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,,,,,,,,,,,,,,,,Sonoma,Geyserville Unified,</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>In addition to the <code>csv</code> format, the <code>parquet</code>, <code>table</code>, and <code>zeek</code> formats
also benefit from fused records.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="44-put">4.4 <a href="/docs/language/operators/drop">put</a><a class="hash-link" href="#44-put" title="Direct link to heading">‚Äã</a></h3><p><code>put</code> produces output records from input records and either mutates or
adds fields indicated by the expressions.</p><p>If multiple fields are written by <code>put</code>,  the new field values are computed first
and then they are all written simultaneously.  As a result, a computed value
cannot be referenced in another expression.  If you need to re-use a computed result,
this can be done by chaining multiple <code>put</code> operators.
For example, this will not work</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">put N:=len(somelist), isbig:=N&gt;10</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>but it could be written instead as</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">put N:=len(somelist) | put isbig:=N&gt;10</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>For example,
to add a field to our test score records representing the computed average of the math,
reading, and writing scores for each school that reported them, we could say:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -Z &#x27;AvgScrMath!=null | put AvgAll:=(AvgScrMath+AvgScrRead+AvgScrWrite)/3.0&#x27; testscores.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>which produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AvgScrMath: 371 (uint16),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AvgScrRead: 376 (uint16),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AvgScrWrite: 368 (uint16),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cname: &quot;Los Angeles&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dname: &quot;Los Angeles Unified&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sname: &quot;APEX Academy&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AvgAll: 371.6666666666667</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>We can also use <code>put</code> to create derived tables and display them in tabular
form using <code>-f table</code>, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -f table &#x27;AvgScrMath != null | put combined_scores:=AvgScrMath+AvgScrRead+AvgScrWrite | cut sname,combined_scores,AvgScrMath,AvgScrRead,AvgScrWrite | head 5&#x27; testscores.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">sname                       combined_scores AvgScrMath AvgScrRead AvgScrWrite</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">APEX Academy                1115            371        376        368</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ARISE High                  1095            367        359        369</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Abraham Lincoln High        1464            491        489        484</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Abraham Lincoln Senior High 1319            462        432        425</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Academia Avance Charter     1148            386        380        382</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>As noted above the <code>put</code> keyword is entirely optional. Here we omit
it and create a new field to hold the lowercase representation of
the school <code>District</code> field:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -Z &#x27;cut District | lower_district:=lower(District)&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    District: &quot;Nevada County Office of Education&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lower_district: &quot;nevada county office of education&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="45-rename">4.5 <a href="/docs/language/operators/rename">rename</a><a class="hash-link" href="#45-rename" title="Direct link to heading">‚Äã</a></h3><p><code>rename</code> produces output records from input records where field mays are
change.  Note that a field&#x27;s name can only be renamed as it exists inside
of the record and cannot be moved between sub-records in a nested value.</p><p>The rename steps are applied left-to-right.</p><p>Here is a simple example that renames some fields in our test score data
to match the field names from our school data:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -Z &#x27;rename School:=sname,District:=dname,City:=cname&#x27; testscores.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AvgScrMath: null (uint16),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AvgScrRead: null (uint16),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AvgScrWrite: null (uint16),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    City: &quot;Riverside&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    District: &quot;Beaumont Unified&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    School: &quot;21st Century Learning Institute&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>As mentioned above, a field can only be renamed within its own record. In
other words, a field cannot move between nested levels when being renamed.</p><p>For example, consider this sample input data <code>nested.zson</code>:</p><div class="codeBlockContainer_I0IT language-mdtest-input theme-code-block"><div class="codeBlockContent_wNvx mdtest-input"><pre tabindex="0" class="prism-code language-mdtest-input codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    outer: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        inner: &quot;MyValue&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The field <code>inner</code> can be renamed within that nested record, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -Z &#x27;rename outer.renamed:=outer.inner&#x27; nested.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    outer: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        renamed: &quot;MyValue&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>However, an attempt to rename it to a top-level field will fail, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -Z &#x27;rename toplevel:=outer.inner&#x27; nested.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces this compile-time error message and the query is not run:</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">cannot rename outer.inner to toplevel</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This goal could instead be achieved by combining <a href="#44-put"><code>put</code></a> and <a href="#42-drop"><code>drop</code></a>,
e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -Z &#x27;put toplevel:=outer.inner | drop outer.inner&#x27; nested.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    toplevel: &quot;MyValue&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="5-aggregates">5. Aggregates<a class="hash-link" href="#5-aggregates" title="Direct link to heading">‚Äã</a></h2><p>The <a href="/docs/language/operators/summarize">summarize operator</a>
performs zero or more aggregations with zero or more group-by expressions.
Each aggregation is performed by an
<a href="/docs/language/aggregates">aggregate function</a>
that operates on batches of records to carry out a running computation over
the values they contain.  The <code>summarize</code> keyword is optional as the operato
can be <a href="/docs/language/overview#26-implied-operators">inferred from context</a>.</p><p>As with SQL, multiple aggregate functions may be invoked at the same time.
For example, to simultaneously calculate the minimum, maximum, and average of
the math test scores:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -f table &#x27;min(AvgScrMath),max(AvgScrMath),avg(AvgScrMath)&#x27; testscores.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">min max avg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">289 699 484.99019042123484</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="51-output-field-names">5.1 Output Field Names<a class="hash-link" href="#51-output-field-names" title="Direct link to heading">‚Äã</a></h3><p>The output of an aggregation is a sequence of records that form a table,
and the field names are specified in the assignments of the aggregate
functions and the group-by assignemnts.  When an expression is given
without a field name, a name is derived from the expression.  If a name
cannot be derived, then a compile-time error is reported and the query
does not run.</p><p>As just shown, by default the result returned is placed in a field with the
same name as the aggregate function. You may instead use <code>:=</code> to specify an
explicit name for the generated field, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -f table &#x27;lowest:=min(AvgScrMath),highest:=max(AvgScrMath),typical:=avg(AvgScrMath)&#x27; testscores.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">lowest highest typical</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">289    699     484.99019042123484</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="52-grouping">5.2 Grouping<a class="hash-link" href="#52-grouping" title="Direct link to heading">‚Äã</a></h3><p>All aggregate functions may be invoked with one or more
<a href="/docs/language/operators/summarize">group-by expressions</a>, which forms one
or more group-by keys.  Each unique group-by set defines input values
upon which each aggregate function instance operates.
If no group-by expression is provided, the aggregate function
operates over all values in the input stream and a single record is the result.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="53-where-clause">5.3 Where Clause<a class="hash-link" href="#53-where-clause" title="Direct link to heading">‚Äã</a></h3><p>A <code>where</code> clause may also be added to filter the values on which an aggregate
function will operate.
For example,
this query calculates average math test scores for the cities of Los Angeles
and San Francisco:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -Z &#x27;LA_Math:=avg(AvgScrMath) where cname==&quot;Los Angeles&quot;, SF_Math:=avg(AvgScrMath) where cname==&quot;San Francisco&quot;&#x27; testscores.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    LA_Math: 456.27341772151897,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SF_Math: 485.3636363636364</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="54-aggregate-functions">5.4 Aggregate Functions<a class="hash-link" href="#54-aggregate-functions" title="Direct link to heading">‚Äã</a></h3><p>This section depicts examples of variou
<a href="/docs/language/overview#610-aggregate-function-calls">aggregate functions</a>
operating over thes &quot;schools data set&quot;.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="541-and">5.4.1 <a href="/docs/language/aggregates/and">and</a><a class="hash-link" href="#541-and" title="Direct link to heading">‚Äã</a></h4><p>The <code>and</code> function accumulates a Boolean truth value based on the logical AND
of all of its input.</p><p>Many of the school records in our sample data include websites, but many do
not. The following query shows the cities in which all schools have a website. e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -Z &#x27;all_schools_have_website:=and(Website!=null) by City | sort City&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    City: &quot;Acampo&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    all_schools_have_website: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    City: &quot;Acton&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    all_schools_have_website: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    City: &quot;Acton, CA&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    all_schools_have_website: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="542-any">5.4.2 <a href="/docs/language/aggregates/any">any</a><a class="hash-link" href="#542-any" title="Direct link to heading">‚Äã</a></h4><p>The <code>any</code> function produces one value from all of its input, chosen in
an undefined manner.</p><p>This query gives the name of one of the schools in our sample data:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;any(School)&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>For small inputs that fit in memory, this will typically be the first such
field in the stream, but in general you should not rely upon this.  In this
case, the output is:</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{any:&quot;&#x27;3R&#x27; Middle&quot;}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="543-avg">5.4.3 <a href="/docs/language/aggregates/avg">avg</a><a class="hash-link" href="#543-avg" title="Direct link to heading">‚Äã</a></h4><p>The <code>avg</code> function computes an arithmetic mean over all of all of its input.</p><p>This query calculates the average of the math test scores:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -f table &#x27;avg(AvgScrMath)&#x27; testscores.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>and produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">avg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">484.99019042123484</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="544-collect">5.4.4 <a href="/docs/language/aggregates/collect">collect</a><a class="hash-link" href="#544-collect" title="Direct link to heading">‚Äã</a></h4><p>The <code>collect</code> function accumulates all of its input into an array.</p><p>For schools in Fresno county that include websites, the following query
constructs an ordered list per city of their websites along with a parallel
list of which school each website represents:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -Z &#x27;County==&quot;Fresno&quot; Website!=null | Websites:=collect(Website),Schools:=collect(School) by City | sort City&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>and produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    City: &quot;Auberry&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Websites: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;www.sierra.k12.ca.us&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;www.sierra.k12.ca.us&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;www.pineridge.k12.ca.us&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;www.pineridge.k12.ca.us&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Schools: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Auberry Elementary&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Balch Camp Elementary&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Pine Ridge Elementary&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    City: &quot;Big Creek&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Websites: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;www.bigcreekschool.com&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;www.bigcreekschool.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Schools: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Big Creek Elementary&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="545-count">5.4.5 <a href="/docs/language/aggregates/count">count</a><a class="hash-link" href="#545-count" title="Direct link to heading">‚Äã</a></h4><p>The <code>count</code> function produces a count of all of its input values.</p><p>This query counts the number of records in each of our example data sources:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;count()&#x27; schools.zson</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;count()&#x27; testscores.zson</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;count()&#x27; webaddrs.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>and produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{count:17686(uint64)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{count:2331(uint64)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{count:2223(uint64)}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The <code>Website</code> field is known to be in our school and website address data
sources, but not in the test score data. To confirm this, we can count across
all data sources and specify the named field, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;count(Website)&#x27; *.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{count:19909(uint64)}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Since <code>17686 + 2223 = 19909</code>, the count result is what we expected.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="546-dcount">5.4.6 <a href="/docs/language/aggregates/dcount">dcount</a><a class="hash-link" href="#546-dcount" title="Direct link to heading">‚Äã</a></h4><p>The <code>dcount</code> function produces a distinct count of all of its input values,
i.e., the number of unique values in its input.</p><p>For large inputs, this value  is an approximation of the actual value.
The approcimation error is described in detail in the code and research linked
from the <a href="https://github.com/axiomhq/hyperloglog" target="_blank" rel="noopener noreferrer">HyperLogLog repository</a>.</p><p>This query generates an approcimate count the number of unique school names
in our sample data set:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -Z &#x27;dcount(School)&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>and produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dcount: 13804 (uint64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>To see the precise value, which may take longer to execute, this query</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -Z &#x27;count() by School | count()&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    count: 13876 (uint64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Here we saw the approximation was off by 0.3%.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="547-max">5.4.7 <a href="/docs/language/aggregates/max">max</a><a class="hash-link" href="#547-max" title="Direct link to heading">‚Äã</a></h4><p>The <code>max</code> function computes the maximum numeric value over all of its input.</p><p>To see the highest reported math test score, this query:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -f table &#x27;max(AvgScrMath)&#x27; testscores.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">max</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">699</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="548-min">5.4.8 <a href="/docs/language/aggregates/min">min</a><a class="hash-link" href="#548-min" title="Direct link to heading">‚Äã</a></h4><p>The <code>min</code> function computes the minimum numeric value over all of its input.</p><p>To see the lowest reported math test score, this query</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -f table &#x27;min(AvgScrMath)&#x27; testscores.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">min</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">289</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="549-or">5.4.9 <a href="/docs/language/aggregates/or">or</a><a class="hash-link" href="#549-or" title="Direct link to heading">‚Äã</a></h4><p>The <code>or</code> function accumulates a Boolean truth value based on the logical OR
of all of its input.</p><p>Many of the school records in our sample data include websites, but many do
not. The following query shows the cities for which at least one school has
a listed website:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -Z &#x27;has_at_least_one_school_website:=or(Website!=null) by City | sort City&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>and produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    City: &quot;Acampo&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    has_at_least_one_school_website: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    City: &quot;Acton&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    has_at_least_one_school_website: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    City: &quot;Acton, CA&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    has_at_least_one_school_website: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    City: &quot;Adelanto&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    has_at_least_one_school_website: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    City: &quot;Adin&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    has_at_least_one_school_website: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="5410-sum">5.4.10 <a href="/docs/language/aggregates/sum">sum</a><a class="hash-link" href="#5410-sum" title="Direct link to heading">‚Äã</a></h4><p>The <code>sum</code> function computes the minimum numeric value over all of its input.</p><p>This query calculates the total of all the math, reading, and writing test scores
across all schools:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -Z &#x27;AllMath:=sum(AvgScrMath),AllRead:=sum(AvgScrRead),AllWrite:=sum(AvgScrWrite)&#x27; testscores.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>and produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AllMath: 840488 (uint64),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AllRead: 832260 (uint64),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AllWrite: 819632 (uint64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="5411-union">5.4.11 <a href="/docs/language/aggregates/union">union</a><a class="hash-link" href="#5411-union" title="Direct link to heading">‚Äã</a></h4><p>The <code>union</code> function computes a set union over all of this input.</p><p>For schools in Fresno county that include websites, the following query
constructs a set per city of all the unique websites for the schools in that
city:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -Z &#x27;County==&quot;Fresno&quot; Website!=null | Websites:=union(Website) by City | sort City&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>and produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    City: &quot;Auberry&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Websites: |[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;www.sierra.k12.ca.us&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;www.pineridge.k12.ca.us&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    City: &quot;Big Creek&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Websites: |[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;www.bigcreekschool.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="55-group-by-examples">5.5 Group-by Examples<a class="hash-link" href="#55-group-by-examples" title="Direct link to heading">‚Äã</a></h3><p>As mentioned above,
the <code>summarize</code> operator may include group-by expressions
that partitions the input sequence into groups that
are processed independently from on another.</p><p>The output order of values from each grouped aggregation is undefined.
To ensure a deterministic order,
a <a href="/docs/language/operators/sort"><code>sort</code> operator</a>
may be used downstream of the aggregation.</p><blockquote><p>In many of the examples, you will see a <code>sort</code> tacked onto the end of the
computation.  This ensures a deterministic order and reliable testing since
all of these examples are subject to automated testing.</p></blockquote><p>The simplest group-by example summarizes the unique values of the named field(s),
which requires no aggregate function</p><p>For example, to see the different categories of status for the schools
in our example data, this query:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;by StatusType | sort&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{StatusType:&quot;Active&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{StatusType:&quot;Closed&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{StatusType:&quot;Merged&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{StatusType:&quot;Pending&quot;}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>If you work a lot at the UNIX/Linux shell, you might have sought to accomplish
the same via a familiar idiom: <code>sort | uniq</code>.  This works in Zed, but the <code>by</code>
shorthand is preferable, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;cut StatusType | sort | uniq&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{StatusType:&quot;Active&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{StatusType:&quot;Closed&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{StatusType:&quot;Merged&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{StatusType:&quot;Pending&quot;}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>When specifying multiple comma-separated field names, a group is formed for each
unique combination of values found in those fields.  To see the average reading
test scores and school count for each county/district pairing, this query:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -f table &#x27;avg(AvgScrRead),count() by cname,dname | sort -r count&#x27; testscores.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">cname           dname                                              avg                count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Los Angeles     Los Angeles Unified                                416.83522727272725 202</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">San Diego       San Diego Unified                                  472                44</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alameda         Oakland Unified                                    414.95238095238096 27</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">San Francisco   San Francisco Unified                              454.36842105263156 26</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Instead of a simple field name, any of the comma-separated group-by elements
can be any <a href="/docs/language/overview#6-expressions">Zed expression</a>, which may
appear in the form of a field assignment <code>field:=expr</code></p><p>To see a count of how many school names of a particular character length
appear in our example data, this query:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -f table &#x27;count() by Name_Length:=len(School) | sort -r&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">Name_Length count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">89          2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">85          2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">84          2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">83          1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The fields referenced in a <code>by</code> grouping may or may not be present, or may be
inconsistently present, in the given input records, in which case, the group-by
aggregation still proceeds but embeds any error conditions in the result,
When a value is missing for a specified fiedl, it will appear as <code>error(&quot;missing&quot;)</code>.</p><p>For instance, if we&#x27;d made an typographical error in our
prior example when attempting to reference the <code>dname</code> field,
the misspelled column would appear as embedded missing errors, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -f table &#x27;avg(AvgScrRead),count() by cname,dnmae | sort -r count&#x27; testscores.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">cname           dnmae avg                count</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Los Angeles     -     450.83037974683543 469</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">San Diego       -     496.74789915966386 168</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">San Bernardino  -     465.11764705882354 117</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Riverside       -     463.8170731707317  110</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Orange          -     510.91011235955057 107</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="6-sorting">6. Sorting<a class="hash-link" href="#6-sorting" title="Direct link to heading">‚Äã</a></h2><p>Zed provides a convenient way to sort data using the
<a href="/docs/language/operators/sort">sort operator</a>.
All values in Zed have a well-defined sort order, even complex values
and values of different data types, so you can easily sort heterogenous
sequences of values.</p><p>This query sorts our test score records by average reading score:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;sort AvgScrRead&#x27; testscores.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>and produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{AvgScrMath:352(uint16),AvgScrRead:308(uint16),AvgScrWrite:327(uint16),cname:&quot;Alameda&quot;,dname:&quot;Oakland Unified&quot;,sname:&quot;Oakland International High&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{AvgScrMath:289(uint16),AvgScrRead:314(uint16),AvgScrWrite:312(uint16),cname:&quot;Contra Costa&quot;,dname:&quot;West Contra Costa Unified&quot;,sname:&quot;Gompers (Samuel) Continuation&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{AvgScrMath:450(uint16),AvgScrRead:321(uint16),AvgScrWrite:318(uint16),cname:&quot;San Francisco&quot;,dname:&quot;San Francisco Unified&quot;,sname:&quot;S.F. International High&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{AvgScrMath:314(uint16),AvgScrRead:324(uint16),AvgScrWrite:321(uint16),cname:&quot;Los Angeles&quot;,dname:&quot;Norwalk-La Mirada Unified&quot;,sname:&quot;El Camino High (Continuation)&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{AvgScrMath:307(uint16),AvgScrRead:324(uint16),AvgScrWrite:328(uint16),cname:&quot;Contra Costa&quot;,dname:&quot;West Contra Costa Unified&quot;,sname:&quot;North Campus Continuation&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Now we&#x27;ll sort the test score records first by average reading score and then
by average math score. Note how this changed the order of the bottom two
records in the result, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;sort AvgScrRead,AvgScrMath&#x27; testscores.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{AvgScrMath:352(uint16),AvgScrRead:308(uint16),AvgScrWrite:327(uint16),cname:&quot;Alameda&quot;,dname:&quot;Oakland Unified&quot;,sname:&quot;Oakland International High&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{AvgScrMath:289(uint16),AvgScrRead:314(uint16),AvgScrWrite:312(uint16),cname:&quot;Contra Costa&quot;,dname:&quot;West Contra Costa Unified&quot;,sname:&quot;Gompers (Samuel) Continuation&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{AvgScrMath:450(uint16),AvgScrRead:321(uint16),AvgScrWrite:318(uint16),cname:&quot;San Francisco&quot;,dname:&quot;San Francisco Unified&quot;,sname:&quot;S.F. International High&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{AvgScrMath:307(uint16),AvgScrRead:324(uint16),AvgScrWrite:328(uint16),cname:&quot;Contra Costa&quot;,dname:&quot;West Contra Costa Unified&quot;,sname:&quot;North Campus Continuation&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{AvgScrMath:314(uint16),AvgScrRead:324(uint16),AvgScrWrite:321(uint16),cname:&quot;Los Angeles&quot;,dname:&quot;Norwalk-La Mirada Unified&quot;,sname:&quot;El Camino High (Continuation)&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Here we&#x27;ll find the counties with the most schools by using the
<a href="/docs/language/aggregates/count"><code>count()</code></a> aggregate function and piping its
output to a <code>sort</code> in reverse order. Note that even though we didn&#x27;t list a
field name as an explicit argument, the <code>sort</code> operator did what we wanted
because it found a field of the <code>uint64</code> <a href="/docs/language/overview#5-data-types">data type</a>,
e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;count() by County | sort -r&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{County:&quot;Los Angeles&quot;,count:3636(uint64)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{County:&quot;San Diego&quot;,count:1139(uint64)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{County:&quot;Orange&quot;,count:886(uint64)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Next we&#x27;ll count the number of unique websites mentioned in our school
records. Since we know some of the records don&#x27;t include a website, we&#x27;ll
deliberately put the null values at the front of the list so we can see how
many there are, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;count() by Website | sort -nulls first Website&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{Website:null(string),count:10722(uint64)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{Website:&quot;acornstooakscharter.org&quot;,count:1(uint64)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{Website:&quot;atlascharter.org&quot;,count:1(uint64)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{Website:&quot;bizweb.lightspeed.net/~leagles&quot;,count:1(uint64)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="7-sequence-filters">7. Sequence Filters<a class="hash-link" href="#7-sequence-filters" title="Direct link to heading">‚Äã</a></h2><p>Several Zed operators manipulate a sequence of values based on the order
in which they appear in the input:</p><ul><li><a href="/docs/language/operators/head">head</a> - copy leading values of input sequence</li><li><a href="/docs/language/operators/tail">tail</a> - copy trailing values of input sequence</li><li><a href="/docs/language/operators/uniq">uniq</a> - deduplicate adjacent values</li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="71-head">7.1 <a href="/docs/language/operators/head">head</a><a class="hash-link" href="#71-head" title="Direct link to heading">‚Äã</a></h3><p>The <code>head</code> operator takes an integer argument <code>N</code> and copies the first N values
of its input to its output.</p><p>For example, this query selects the first school record:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -Z &#x27;head&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>and produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    School: &quot;&#x27;3R&#x27; Middle&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    District: &quot;Nevada County Office of Education&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    City: &quot;Nevada City&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    County: &quot;Nevada&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Zip: &quot;95959&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Latitude: null (float64),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Longitude: null (float64),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Magnet: null (bool),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    OpenDate: 1995-10-30T00:00:00Z,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ClosedDate: 1996-06-28T00:00:00Z,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Phone: null (string),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    StatusType: &quot;Merged&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Website: null (string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>To see the first five school records in Los Angeles county, this query</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;County==&quot;Los Angeles&quot; | head 5&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;ABC Adult&quot;,District:&quot;ABC Unified&quot;,City:&quot;Cerritos&quot;,County:&quot;Los Angeles&quot;,Zip:&quot;90703-2801&quot;,Latitude:33.878924,Longitude:-118.07128,Magnet:null(bool),OpenDate:1980-07-01T00:00:00Z,ClosedDate:null(time),Phone:&quot;(562) 229-7960&quot;,StatusType:&quot;Active&quot;,Website:&quot;www.abcadultschool.com&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;ABC Charter Middle&quot;,District:&quot;Los Angeles Unified&quot;,City:&quot;Los Angeles&quot;,County:&quot;Los Angeles&quot;,Zip:&quot;90017&quot;,Latitude:null(float64),Longitude:null(float64),Magnet:null(bool),OpenDate:2008-09-03T00:00:00Z,ClosedDate:2009-06-10T00:00:00Z,Phone:null(string),StatusType:&quot;Closed&quot;,Website:&quot;www.abcsf.us&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;ABC Evening High School&quot;,District:&quot;ABC Unified&quot;,City:&quot;Cerritos&quot;,County:&quot;Los Angeles&quot;,Zip:&quot;90701&quot;,Latitude:null(float64),Longitude:null(float64),Magnet:null(bool),OpenDate:1980-07-01T00:00:00Z,ClosedDate:1994-11-23T00:00:00Z,Phone:null(string),StatusType:&quot;Closed&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;ABC Secondary (Alternative)&quot;,District:&quot;ABC Unified&quot;,City:&quot;Cerritos&quot;,County:&quot;Los Angeles&quot;,Zip:&quot;90703-2301&quot;,Latitude:33.881547,Longitude:-118.04635,Magnet:false,OpenDate:1991-09-05T00:00:00Z,ClosedDate:null(time),Phone:&quot;(562) 229-7768&quot;,StatusType:&quot;Active&quot;,Website:null(string)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:&quot;APEX Academy&quot;,District:&quot;Los Angeles Unified&quot;,City:&quot;Los Angeles&quot;,County:&quot;Los Angeles&quot;,Zip:&quot;90028-8526&quot;,Latitude:34.052234,Longitude:-118.24368,Magnet:false,OpenDate:2008-09-03T00:00:00Z,ClosedDate:null(time),Phone:&quot;(323) 817-6550&quot;,StatusType:&quot;Active&quot;,Website:null(string)}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="72-tail">7.2 <a href="/docs/language/operators/tail">tail</a><a class="hash-link" href="#72-tail" title="Direct link to heading">‚Äã</a></h3><p>The <code>tail</code> operator takes an integer argument <code>N</code> and copies the last N values
of its input to its output.</p><p>For example, this query selects the last school record:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -Z &#x27;tail&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>and produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    School: null (string),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    District: &quot;Wheatland Union High&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    City: &quot;Wheatland&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    County: &quot;Yuba&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Zip: &quot;95692-9798&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Latitude: 38.998968,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Longitude: -121.45497,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Magnet: null (bool),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    OpenDate: null (time),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ClosedDate: null (time),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Phone: &quot;(530) 633-3100&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    StatusType: &quot;Active&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Website: &quot;www.wheatlandhigh.org&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>To see the last five school records in Los Angeles county, this query</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;County==&quot;Los Angeles&quot; | tail 5&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{School:null(string),District:&quot;Wiseburn Unified&quot;,City:&quot;Hawthorne&quot;,County:&quot;Los Angeles&quot;,Zip:&quot;90250-6462&quot;,Latitude:33.920462,Longitude:-118.37839,Magnet:null(bool),OpenDate:null(time),ClosedDate:null(time),Phone:&quot;(310) 643-3025&quot;,StatusType:&quot;Active&quot;,Website:&quot;www.wiseburn.k12.ca.us&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:null(string),District:&quot;SBE - Anahuacalmecac International University Preparatory of North America&quot;,City:&quot;Los Angeles&quot;,County:&quot;Los Angeles&quot;,Zip:&quot;90032-1942&quot;,Latitude:34.085085,Longitude:-118.18154,Magnet:null(bool),OpenDate:null(time),ClosedDate:null(time),Phone:&quot;(323) 352-3148&quot;,StatusType:&quot;Active&quot;,Website:&quot;www.dignidad.org&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:null(string),District:&quot;SBE - Academia Avance Charter&quot;,City:&quot;Highland Park&quot;,County:&quot;Los Angeles&quot;,Zip:&quot;90042-4005&quot;,Latitude:34.107313,Longitude:-118.19811,Magnet:null(bool),OpenDate:null(time),ClosedDate:null(time),Phone:&quot;(323) 230-7270&quot;,StatusType:&quot;Active&quot;,Website:&quot;www.academiaavance.com&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:null(string),District:&quot;SBE - Prepa Tec Los Angeles High&quot;,City:&quot;Huntington Park&quot;,County:&quot;Los Angeles&quot;,Zip:&quot;90255-4138&quot;,Latitude:33.983752,Longitude:-118.22344,Magnet:null(bool),OpenDate:null(time),ClosedDate:null(time),Phone:&quot;(323) 800-2741&quot;,StatusType:&quot;Active&quot;,Website:&quot;www.prepatechighschool.org&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{School:null(string),District:&quot;California Advancing Pathways for Students in Los Angeles County ROC/P&quot;,City:&quot;Bellflower&quot;,County:&quot;Los Angeles&quot;,Zip:&quot;90706&quot;,Latitude:33.882509,Longitude:-118.13442,Magnet:null(bool),OpenDate:null(time),ClosedDate:null(time),Phone:&quot;(562) 866-9011&quot;,StatusType:&quot;Active&quot;,Website:&quot;www.CalAPS.org&quot;}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="73-uniq">7.3 <a href="/docs/language/operators/uniq">uniq</a><a class="hash-link" href="#73-uniq" title="Direct link to heading">‚Äã</a></h3><p>The <code>uniq</code> operator copies input values that are different from the previous
input to the output.</p><p>Let&#x27;s say you&#x27;d been looking at the contents of just the <code>District</code> and
<code>County</code> fields in the order they appear in the school data, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;cut District,County&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{District:&quot;Nevada County Office of Education&quot;,County:&quot;Nevada&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{District:&quot;Oakland Unified&quot;,County:&quot;Alameda&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{District:&quot;Victor Elementary&quot;,County:&quot;San Bernardino&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{District:&quot;Novato Unified&quot;,County:&quot;Marin&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{District:&quot;Beaumont Unified&quot;,County:&quot;Riverside&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{District:&quot;Nevada County Office of Education&quot;,County:&quot;Nevada&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{District:&quot;Nevada County Office of Education&quot;,County:&quot;Nevada&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{District:&quot;San Bernardino City Unified&quot;,County:&quot;San Bernardino&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{District:&quot;San Bernardino City Unified&quot;,County:&quot;San Bernardino&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{District:&quot;Ojai Unified&quot;,County:&quot;Ventura&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>To eliminate the adjacent lines that share the same field/value pairs,
this query</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -z &#x27;cut District,County | uniq&#x27; schools.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{District:&quot;Nevada County Office of Education&quot;,County:&quot;Nevada&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{District:&quot;Oakland Unified&quot;,County:&quot;Alameda&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{District:&quot;Victor Elementary&quot;,County:&quot;San Bernardino&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{District:&quot;Novato Unified&quot;,County:&quot;Marin&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{District:&quot;Beaumont Unified&quot;,County:&quot;Riverside&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{District:&quot;Nevada County Office of Education&quot;,County:&quot;Nevada&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{District:&quot;San Bernardino City Unified&quot;,County:&quot;San Bernardino&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{District:&quot;Ojai Unified&quot;,County:&quot;Ventura&quot;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="8-value-construction">8. Value Construction<a class="hash-link" href="#8-value-construction" title="Direct link to heading">‚Äã</a></h2><p>The <a href="/docs/language/operators/yield">yield operator</a> creates one or more output
values for each input value based on the one or more expressions provided
as arguments to yield.</p><p>This example produce two simpler records for every school record listing
the average math score with the school name and the county name:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -Z &#x27;AvgScrMath!=null | yield {school:sname,avg:AvgScrMath}, {county:cname,zvg:AvgScrMath}&#x27; testscores.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>which produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    school: &quot;APEX Academy&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    avg: 371 (uint16)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    county: &quot;Los Angeles&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    zvg: 371 (uint16)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    school: &quot;ARISE High&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    avg: 367 (uint16)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    county: &quot;Alameda&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    zvg: 367 (uint16)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>In earlier example, we used <code>put</code> to create a table using this query:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -f table &#x27;AvgScrMath != null | put combined_scores:=AvgScrMath+AvgScrRead+AvgScrWrite | cut sname,combined_scores,AvgScrMath,AvgScrRead,AvgScrWrite | head 5&#x27; testscores.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">sname                       combined_scores AvgScrMath AvgScrRead AvgScrWrite</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">APEX Academy                1115            371        376        368</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ARISE High                  1095            367        359        369</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Abraham Lincoln High        1464            491        489        484</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Abraham Lincoln Senior High 1319            462        432        425</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Academia Avance Charter     1148            386        380        382</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The same result can be achieved by yielding a record literal,
sometimes with a more intuitive  structure, e.g.,</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -f table &#x27;AvgScrMath != null | yield  {sname,combined_scores:AvgScrMath+AvgScrRead+AvgScrWrite,AvgScrMath,AvgScrRead,AvgScrWrite} | head 5&#x27; testscores.zson</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>produces</p><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">sname                       combined_scores AvgScrMath AvgScrRead AvgScrWrite</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">APEX Academy                1115            371        376        368</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ARISE High                  1095            367        359        369</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Abraham Lincoln High        1464            491        489        484</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Abraham Lincoln Senior High 1319            462        432        425</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Academia Avance Charter     1148            386        380        382</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/brimdata/zed/edit/main/docs/tutorials/schools.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/tutorials/join"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Join</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/language"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">The Zed Language</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-getting-started" class="table-of-contents__link toc-highlight">1. Getting Started</a></li><li><a href="#2-exploring-the-data" class="table-of-contents__link toc-highlight">2. Exploring the Data</a></li><li><a href="#3-searching" class="table-of-contents__link toc-highlight">3. Searching</a><ul><li><a href="#31-keyword-search" class="table-of-contents__link toc-highlight">3.1 Keyword Search</a></li><li><a href="#32-globs" class="table-of-contents__link toc-highlight">3.2 Globs</a></li><li><a href="#33-regular-expressions" class="table-of-contents__link toc-highlight">3.3 Regular Expressions</a></li><li><a href="#34-literal-search" class="table-of-contents__link toc-highlight">3.4 Literal Search</a></li><li><a href="#35-predicate-search" class="table-of-contents__link toc-highlight">3.5 Predicate Search</a></li><li><a href="#36-boolean-logic" class="table-of-contents__link toc-highlight">3.6 Boolean Logic</a></li></ul></li><li><a href="#4-record-operators" class="table-of-contents__link toc-highlight">4. Record Operators</a><ul><li><a href="#41-cut" class="table-of-contents__link toc-highlight">4.1 cut</a></li><li><a href="#42-drop" class="table-of-contents__link toc-highlight">4.2 drop</a></li><li><a href="#43-fuse" class="table-of-contents__link toc-highlight">4.3 fuse</a></li><li><a href="#44-put" class="table-of-contents__link toc-highlight">4.4 put</a></li><li><a href="#45-rename" class="table-of-contents__link toc-highlight">4.5 rename</a></li></ul></li><li><a href="#5-aggregates" class="table-of-contents__link toc-highlight">5. Aggregates</a><ul><li><a href="#51-output-field-names" class="table-of-contents__link toc-highlight">5.1 Output Field Names</a></li><li><a href="#52-grouping" class="table-of-contents__link toc-highlight">5.2 Grouping</a></li><li><a href="#53-where-clause" class="table-of-contents__link toc-highlight">5.3 Where Clause</a></li><li><a href="#54-aggregate-functions" class="table-of-contents__link toc-highlight">5.4 Aggregate Functions</a></li><li><a href="#55-group-by-examples" class="table-of-contents__link toc-highlight">5.5 Group-by Examples</a></li></ul></li><li><a href="#6-sorting" class="table-of-contents__link toc-highlight">6. Sorting</a></li><li><a href="#7-sequence-filters" class="table-of-contents__link toc-highlight">7. Sequence Filters</a><ul><li><a href="#71-head" class="table-of-contents__link toc-highlight">7.1 head</a></li><li><a href="#72-tail" class="table-of-contents__link toc-highlight">7.2 tail</a></li><li><a href="#73-uniq" class="table-of-contents__link toc-highlight">7.3 uniq</a></li></ul></li><li><a href="#8-value-construction" class="table-of-contents__link toc-highlight">8. Value Construction</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://www.brimdata.io/join-slack/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/brimdata" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://www.brimdata.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Brim Data, Inc.<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/brimdata" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 Brim Data, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.920265a1.js"></script>
<script src="/assets/js/main.341fc2f9.js"></script>
</body>
</html>