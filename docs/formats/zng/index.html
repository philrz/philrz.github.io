<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-v1.2.0 plugin-docs plugin-id-default docs-doc-id-formats/zng">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CV1VB9VF13"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-CV1VB9VF13",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Zed" href="/opensearch.xml">

<link rel="stylesheet" href="https://use.typekit.net/nll6rzm.css"><title data-rh="true">ZNG Specification | Zed</title><meta data-rh="true" property="og:image" content="https://https://philrz.github.io/img/zed-social-image.jpg"><meta data-rh="true" name="twitter:image" content="https://https://philrz.github.io/img/zed-social-image.jpg"><meta data-rh="true" property="og:url" content="https://https://philrz.github.io/docs/formats/zng/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="twitter:card" content="summary"><meta data-rh="true" name="twitter:site" content="@brimdata"><meta data-rh="true" name="twitter:image:alt" content="Zed Documentation Image"><meta data-rh="true" name="docusaurus_version" content="v1.2.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-v1.2.0"><meta data-rh="true" name="docsearch:version" content="v1.2.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-v1.2.0"><meta data-rh="true" property="og:title" content="ZNG Specification | Zed"><meta data-rh="true" name="description" content="1. Introduction"><meta data-rh="true" property="og:description" content="1. Introduction"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://https://philrz.github.io/docs/formats/zng/"><link data-rh="true" rel="alternate" href="https://https://philrz.github.io/docs/formats/zng/" hreflang="en"><link data-rh="true" rel="alternate" href="https://https://philrz.github.io/docs/formats/zng/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://WZNIEWJ5O6-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.857d1a09.css">
<link rel="preload" href="/assets/js/runtime~main.9b291edb.js" as="script">
<link rel="preload" href="/assets/js/main.d73159f0.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/zed-logo.svg" alt="Zed Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/zed-logo.svg" alt="Zed Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Zed</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/">v1.2.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/1.2.0/formats/zng/">1.2.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/formats/zng/">v1.2.0</a></li><li><a class="dropdown__link" href="/docs/v1.1.0/formats/zng/">v1.1.0</a></li></ul></div><a href="https://github.com/brimdata" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/install/">Installation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/commands/">Commands</a><button aria-label="Toggle the collapsible sidebar category &#x27;Commands&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/tutorials/">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/language/">Language</a><button aria-label="Toggle the collapsible sidebar category &#x27;Language&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/formats/">Formats</a><button aria-label="Toggle the collapsible sidebar category &#x27;Formats&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/formats/zed/">Data Model</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/formats/zng/">ZNG</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/formats/zson/">ZSON</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/formats/zst/">ZST</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/formats/zjson/">ZJSON</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/formats/compression/">Compression</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/lake/api/">Lake</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/libraries/">Libraries</a><button aria-label="Toggle the collapsible sidebar category &#x27;Libraries&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/formats/"><span itemprop="name">Formats</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">ZNG</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v1.2.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>ZNG Specification</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-introduction">1. Introduction<a class="hash-link" href="#1-introduction" title="Direct link to heading">​</a></h2><p>ZNG (pronounced &quot;zing&quot;) is an efficient, sequence-oriented serialization format for any data
conforming to the <a href="/docs/formats/zed/">Zed data model</a>.</p><p>ZNG is &quot;row oriented&quot; and
analogous to <a href="https://avro.apache.org" target="_blank" rel="noopener noreferrer">Apache Avro</a> but does not
require schema definitions as it instead utilizes the fine-grained type system
of the Zed data model.
This binary format is based on machine-readable data types with an
encoding methodology inspired by Avro,
<a href="https://en.wikipedia.org/wiki/Apache_Parquet" target="_blank" rel="noopener noreferrer">Parquet</a>, and
<a href="https://developers.google.com/protocol-buffers" target="_blank" rel="noopener noreferrer">Protocol Buffers</a>.</p><p>To this end, ZNG embeds all type information
in the stream itself while having a binary serialization format that
allows &quot;lazy parsing&quot; of fields such that
only the fields of interest in a stream need to be deserialized and interpreted.
Unlike Avro, ZNG embeds its &quot;schemas&quot; in the data stream as Zed types and thereby admits
an efficient multiplexing of heterogeneous data types by prepending to each
data value a simple integer identifier to reference its type.</p><p>Since no external schema definitions exist in ZNG, a &quot;type context&quot; is constructed
on the fly by composing dynamic type definitions embedded in the ZNG format.
ZNG can be readily adapted to systems like
<a href="https://kafka.apache.org/" target="_blank" rel="noopener noreferrer">Apache Kafka</a> which utilize schema registries,
by having a connector translate the schemas implied in the
ZNG stream into registered schemas and vice versa.  Better still, Kafka could
be used natively with ZNG obviating the need for the schema registry.</p><p>Multiple ZNG streams with different type contexts are easily merged because the
serialization of values does not depend on the details of
the type context.  One or more streams can be merged by simply merging the
input contexts into an output context and adjusting the type reference of
each value in the output ZNG sequence.  The values need not be traversed
or otherwise rewritten to be merged in this fashion.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-the-zng-format">2. The ZNG Format<a class="hash-link" href="#2-the-zng-format" title="Direct link to heading">​</a></h2><p>A ZNG stream comprises a sequence of frames where
each frame contains one of three types of data:
<em>types</em>, <em>values</em>, or externally-defined <em>control</em>.</p><p>A stream is punctuated by the end-of-stream value <code>0xff</code>.</p><p>Each frame header includes a length field
allowing an implementation to easily skip from frame to frame.</p><p>Each frame begins with a single-byte &quot;frame code&quot;:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    7 6 5 4 3 2 1 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   +-+-+-+-+-+-+-+-+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   |V|C|  T|      L|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   +-+-+-+-+-+-+-+-+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   V: 1 bit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     Version number.  Must be zero.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   C: 1 bit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     Indicates compressed frame data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   T: 2 bits</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     Type of frame data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       00: Types</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       01: Values</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       10: Control</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       11: End of stream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   L: 4 bits</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     Low-order bits of frame length.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Bit 7 of the frame code must be zero as it defines version 0
of the ZNG stream format.  If a future version of ZNG
arises, bit 7 of future ZNG frames will be 1.
ZNG version 0 readers must ignore and skip over such frames using the
<code>len</code> field, which must survive future versions.
Any future versions of ZNG must be able to integrate version 0 frames
for backward compatibility.</p><p>Following the frame code is its encoded length followed by a &quot;frame payload&quot;
of bytes of said length:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;frame code&gt;&lt;uvarint&gt;&lt;frame payload&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The length encoding utilizes a variable-length unsigned integer called herein a <code>uvarint</code>:</p><blockquote><p>Inspired by Protocol Buffers,
a <code>uvarint</code> is an unsigned, variable-length integer encoded as a sequence of
bytes consisting of N-1 bytes with bit 7 clear and the Nth byte with bit 7 set,
whose value is the base-128 number composed of the digits defined by the lower
7 bits of each byte from least-significant digit (byte 0) to
most-significant digit (byte N-1).</p></blockquote><p>The frame payload&#x27;s length is equal to the value of the <code>uvarint</code> following the
frame code times 16 plus the low 4-bit integer value <code>L</code> field in the frame code.</p><p>If the <code>C</code> bit is set in the frame code, then the frame payload following the
frame length is compressed and has the form:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;format&gt;&lt;size&gt;&lt;compressed payload&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where</p><ul><li><code>&lt;format&gt;</code> is a single byte indicating the compression format of the the compressed payload,</li><li><code>&lt;size&gt;</code> is a <code>uvarint</code> encoding the size of the uncompressed payload, and</li><li><code>&lt;compressed payload&gt;</code> is a bytes sequence whose length equals
the outer frame length less 1 byte for the compression format and the encoded length
of the <code>uvarint</code> size field.</li></ul><p>The <code>compressed payload</code> is compressed according to the compression algorithm
specified by the <code>format</code> byte.  Each frame is compressed independently
such that the compression algorithm&#x27;s state is not carried from frame to frame
(thereby enabling parallel decoding).</p><p>The <code>&lt;size&gt;</code> value is redundant with the compressed payload
but is useful to an implementation to deterministically
size decompression buffers in advance of decoding.</p><p>Values for the <code>format</code> byte are defined in the
<a href="/docs/formats/compression/">ZNG compression format specification</a>.</p><blockquote><p>This arrangement of frames separating types and values allows
for efficient scanning and parallelization.  In general, values depend
on type definitions but as long as all of the types are known when
values are used, decoding can be done in parallel.  Likewise, since
each block is independently compressed, the blocks can be decompressed
in parallel.  Moreover, efficient filtering can be carried out over
uncompressed data before it is deserialized into native data structures,
e.g., allowing entire frames to be discarded based on
heuristics, e.g., knowing a filtering predicate can&#x27;t be true based on a
quick scan of the data perhaps using the Boyer-Moore algorithm to determine
that a comparison with a string constant would not work for any
value in the buffer.</p></blockquote><p>Whether the payload was originally uncompressed or was decompressed, it is
then interpreted according to the <code>T</code> bits of the frame code as a</p><ul><li><a href="#21-types-frame">types frame</a>,</li><li><a href="#22-values-frame">values frame</a>, or</li><li><a href="#23-control-frame">control frame</a>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-types-frame">2.1 Types Frame<a class="hash-link" href="#21-types-frame" title="Direct link to heading">​</a></h3><p>A <em>types frame</em> encodes a sequence of type definitions for complex Zed types
and establishes a &quot;type ID&quot; for each such definition.
Type IDs for the &quot;primitive types&quot;
are predefined with the IDs listed in the <a href="#3-primitive-types">Primitive Types</a> table.</p><p>Each definition, or &quot;typedef&quot;,
consists of a typedef code followed by its type-specific encoding as described below.
Each type must be decoded in sequence to find the start of the next type definition
as there is no framing to separate the typedefs.</p><p>The typedefs are numbered in the order encountered starting at 30
(as the largest primary type ID is 29).  Types refer to other types
by their type ID.  Note that the type ID of a typedef is implied by its
position in the sequence and is not explicitly encoded.</p><p>The typedef codes are defined as follows:</p><table><thead><tr><th>Code</th><th>Complex Type</th></tr></thead><tbody><tr><td>0</td><td>record type definition</td></tr><tr><td>1</td><td>array type definition</td></tr><tr><td>2</td><td>set type definition</td></tr><tr><td>3</td><td>map type definition</td></tr><tr><td>4</td><td>union type definition</td></tr><tr><td>5</td><td>enum type definition</td></tr><tr><td>6</td><td>error type definition</td></tr><tr><td>7</td><td>named type definition</td></tr></tbody></table><p>Any references to a type ID in the body of a typedef are encoded as a <code>uvarint</code>,</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="211-record-typedef">2.1.1 Record Typedef<a class="hash-link" href="#211-record-typedef" title="Direct link to heading">​</a></h4><p>A record typedef creates a new type ID equal to the next stream type ID
with the following structure:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">---------------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|0x00|&lt;ncolumns&gt;|&lt;name1&gt;&lt;type-id-1&gt;&lt;name2&gt;&lt;type-id-2&gt;...|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------------------------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Record types consist of an ordered set of columns where each column consists of
a name and its type.  Unlike JSON, the ordering of the columns is significant
and must be preserved through any APIs that consume, process, and emit ZNG records.</p><p>A record type is encoded as a count of fields, i.e., <code>&lt;ncolumns&gt;</code> from above,
followed by the field definitions,
where a field definition is a field name followed by a type ID, i.e.,
<code>&lt;name1&gt;</code> followed by <code>&lt;type-id-1&gt;</code> etc. as indicated above.</p><p>The field names in a record must be unique.</p><p>The <code>&lt;ncolumns&gt;</code> value is encoded as a <code>uvarint</code>.</p><p>The field name is encoded as a UTF-8 string defining a &quot;ZNG identifier&quot;.
The UTF-8 string
is further encoded as a &quot;counted string&quot;, which is the <code>uvarint</code> encoding
of the length of the string followed by that many bytes of UTF-8 encoded
string data.</p><p>N.B.: As defined by <a href="/docs/formats/zson/">ZSON</a>, a field name can be any valid UTF-8 string much like JSON
objects can be indexed with arbitrary string keys (via index operator)
even if the field names available to the dot operator are restricted
by language syntax for identifiers.</p><p>The type ID follows the field name and is encoded as a <code>uvarint</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="212-array-typedef">2.1.2 Array Typedef<a class="hash-link" href="#212-array-typedef" title="Direct link to heading">​</a></h4><p>An array type is encoded as simply the type code of the elements of
the array encoded as a <code>uvarint</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">----------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|0x01|&lt;type-id&gt;|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="213-set-typedef">2.1.3 Set Typedef<a class="hash-link" href="#213-set-typedef" title="Direct link to heading">​</a></h4><p>A set type is encoded as the type ID of the
elements of the set, encoded as a <code>uvarint</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">----------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|0x02|&lt;type-id&gt;|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="214-map-typedef">2.1.4 Map Typedef<a class="hash-link" href="#214-map-typedef" title="Direct link to heading">​</a></h4><p>A map type is encoded as the type code of the key
followed by the type code of the value.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">--------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|0x03|&lt;type-id&gt;|&lt;type-id&gt;|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Each <code>&lt;type-id&gt;</code> is encoded as <code>uvarint</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="215-union-typedef">2.1.5 Union Typedef<a class="hash-link" href="#215-union-typedef" title="Direct link to heading">​</a></h4><p>A union typedef creates a new type ID equal to the next stream type ID
with the following structure:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-----------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|0x04|&lt;ntypes&gt;|&lt;type-id-1&gt;&lt;type-id-2&gt;...|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>A union type consists of an ordered set of types
encoded as a count of the number of types, i.e., <code>&lt;ntypes&gt;</code> from above,
followed by the type IDs comprising the types of the union.
The type IDs of a union must be unique.</p><p>The <code>&lt;ntypes&gt;</code> and the type IDs are all encoded as <code>uvarint</code>.</p><p><code>&lt;ntypes&gt;</code> cannot be 0.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="216-enum-typedef">2.1.6 Enum Typedef<a class="hash-link" href="#216-enum-typedef" title="Direct link to heading">​</a></h4><p>An enum type is encoded as a <code>uvarint</code> representing the number of symbols
in the enumeration followed by the names of each symbol.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">--------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|0x05|&lt;nelem&gt;|&lt;name1&gt;&lt;name2&gt;...|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>&lt;nelem&gt;</code> is encoded as <code>uvarint</code>.
The names have the same UTF-8 format as record field names and are encoded
as counted strings following the same convention as record field names.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="217-error-typedef">2.1.7 Error Typedef<a class="hash-link" href="#217-error-typedef" title="Direct link to heading">​</a></h4><p>An error type is encoded as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">----------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|0x06|&lt;type-id&gt;|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>which defines a new error type for error values that have the underlying type
indicated by <code>&lt;type-id&gt;</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="218-named-type-typedef">2.1.8 Named Type Typedef<a class="hash-link" href="#218-named-type-typedef" title="Direct link to heading">​</a></h4><p>A named type defines a new type ID that binds a name to a previously existing type ID.  </p><p>A named type is encoded as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">----------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|0x07|&lt;name&gt;&lt;type-id&gt;|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where <code>&lt;name&gt;</code> is an identifier representing the new type name with a new type ID
allocated as the next available type ID in the stream that refers to the
existing type ID <code>&lt;type-id&gt;</code>.  <code>&lt;type-id&gt;</code> is encoded as a <code>uvarint</code> and <code>&lt;name&gt;</code>
is encoded as a <code>uvarint</code> representing the length of the name in bytes,
followed by that many bytes of UTF-8 string.</p><p>As indicated in the <a href="/docs/formats/zed/">data model</a>,
it is an error to define a type name that has the same name as a primitive type,
and it is permissible to redefine a previously defined type name with a
type that differs from the previous definition.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-values-frame">2.2 Values Frame<a class="hash-link" href="#22-values-frame" title="Direct link to heading">​</a></h3><p>A <em>values frame</em> is a sequence of Zed values each encoded as the value&#x27;s type ID,
encoded as a <code>uvarint</code>, followed by its tag-encoded serialization as described below.</p><p>Since a single type ID encodes the entire value&#x27;s structure, no additional
type information is needed.  Also, the value encoding follows the structure
of the type explicitly so the type is not needed to parse the structure of the
value, but rather only its semantics.</p><p>It is an error for a value to reference a type ID that has not been
previously defined by a typedef scoped to the stream in which the value
appears.</p><p>The value is encoded using a &quot;tag-encoding&quot; scheme
that captures the structure of both primitive types and the recursive
nature of complex types.  This structure is encoded
explicitly in every value and the boundaries of each value and its
recursive nesting can be parsed without knowledge of the type or types of
the underlying values.  This admits an efficient implementation
for traversing the values, inclusive of recursive traversal of complex values,
whereby the inner loop need not consult and interpret the type ID of each element.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="221-tag-encoding-of-values">2.2.1 Tag-Encoding of Values<a class="hash-link" href="#221-tag-encoding-of-values" title="Direct link to heading">​</a></h4><p>Each value is prefixed with a &quot;tag&quot; that defines:</p><ul><li>whether it is the null value, and</li><li>its encoded length in bytes.</li></ul><p>The tag is 0 for the null value and <code>length+1</code> for non-null values where
<code>length</code> is the encoded length of the value.  Note that this encoding
differentiates between a null value and a zero-length value.  Many data types
have a meaningful interpretation of a zero-length value, for example, an
empty array, the empty record, etc.</p><p>The tag itself is encoded as a <code>uvarint</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="222-tag-encoded-body-of-primitive-values">2.2.2 Tag-Encoded Body of Primitive Values<a class="hash-link" href="#222-tag-encoded-body-of-primitive-values" title="Direct link to heading">​</a></h4><p>Following the tag encoding is the value encoded in N bytes as described above.
A typed value with a <code>value</code> of length <code>N</code> is interpreted as described in the
<a href="#3-primitive-types">Primitive Types</a> table.  The type information needed to
interpret all of the value elements of a complex type are all implied by the
top-level type ID of the values frame.  For example, the type ID could indicate
a particular record type, which recursively provides the type information
for all of the elements within that record, including other complex types
embedded within the top-level record.</p><p>Note that because the tag indicates the length of the value, there is no need
to use varint encoding of integer values.  Instead, an integer value is encoded
using the full 8 bits of each byte in little-endian order.  Signed values,
before encoding, are shifted left one bit, and the sign bit stored as bit 0.
For negative numbers, the remaining bits are negated so that the upper bytes
tend to be zero-filled for small integers.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="223-tag-encoded-body-of-complex-values">2.2.3 Tag-Encoded Body of Complex Values<a class="hash-link" href="#223-tag-encoded-body-of-complex-values" title="Direct link to heading">​</a></h4><p>The body of a length-N container comprises zero or more tag-encoded values,
where the values are encoded as follows:</p><table><thead><tr><th>Type</th><th>Value</th></tr></thead><tbody><tr><td><code>array</code></td><td>concatenation of elements</td></tr><tr><td><code>set</code></td><td>normalized concatenation of elements</td></tr><tr><td><code>record</code></td><td>concatenation of elements</td></tr><tr><td><code>map</code></td><td>concatenation of key and value elements</td></tr><tr><td><code>union</code></td><td>concatenation of selector and value</td></tr><tr><td><code>enum</code></td><td>position of enum element</td></tr><tr><td><code>error</code></td><td>wrapped element</td></tr></tbody></table><p>Since N, the byte length of any of these container values, is known,
there is no need to encode a count of the
elements present.  Also, since the type ID is implied by the typedef
of any complex type, each value is encoded without its type ID.</p><p>For sets, the concatenation of elements must be normalized so that the
sequence of bytes encoding each element&#x27;s tag-counted value is
lexicographically greater than that of the preceding element.</p><p>A union value is encoded as a container with two elements. The first
element, called the selector, is the <code>uvarint</code> encoding of the
positional index determining the type of the value in reference to the
union&#x27;s list of defined types, and the second element is the value
encoded according to that type.</p><p>An enumeration value is represented as the <code>uvarint</code> encoding of the
positional index of that value&#x27;s symbol in reference to the enum&#x27;s
list of defined symbols.</p><p>A map value is encoded as a container whose elements are alternating
tag-encoded keys and values, with keys and values encoded according to
the map&#x27;s key type and value type, respectively.</p><p>The concatenation of elements must be normalized so that the
sequence of bytes encoding each tag-counted key (of the key/value pair) is
lexicographically greater than that of the preceding key (of the preceding
key/value pair).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="23-control-frame">2.3 Control Frame<a class="hash-link" href="#23-control-frame" title="Direct link to heading">​</a></h3><p>A <em>control frame</em> contains an application-defined control message.</p><p>Control frames are available to higher-layer protocols and are carried
in ZNG as a convenient signaling mechanism.  A ZNG implementation
may skip over all control frames and is guaranteed by
this specification to decode all of the data as described herein even if such
frames provide additional semantics on top of the base ZNG format.</p><p>The body of a control frame is a control message and may be JSON,
ZSON, ZNG, binary, or UTF-8 text.  The serialization of the control
frame body is independent of the ZNG stream containing the control
frame.</p><p>Any control message not known by a ZNG data receiver shall be ignored.</p><p>The delivery order of control messages with respect to the delivery
order of values of the ZNG stream should be preserved by an API implementing
ZNG serialization and deserialization.
In this way, system endpoints that communicate using ZNG can embed
protocol directives directly into the ZNG stream as control payloads
in an order-preserving semantics rather than defining additional
layers of encapsulation and synchronization between such layers.</p><p>A control frame has the following form:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|&lt;encoding&gt;|&lt;len&gt;|&lt;body&gt;|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where</p><ul><li><code>&lt;encoding&gt;</code> is a single byte indicating whether the body is encoded
as ZNG (0), JSON (1), ZSON (2), an arbitrary UTF-8 string (3), or arbitrary binary data (4),</li><li><code>&lt;len&gt;</code> is a <code>uvarint</code> encoding the length in bytes of the body
(exclusive of the length 1 encoding byte), and</li><li><code>&lt;body&gt;</code> is a control message whose semantics are outside the scope of
the base ZNG specification.</li></ul><p>If the encoding type is ZNG, the embedded ZNG data
starts and ends a single ZNG stream independent of the outer ZNG stream.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="24-end-of-stream">2.4 End of Stream<a class="hash-link" href="#24-end-of-stream" title="Direct link to heading">​</a></h3><p>A ZNG stream must be terminated by an end-of-stream marker.
A new ZNG stream may begin immediately after an end-of-stream marker.
Each such stream has its own, independent type context.</p><p>In this way, the concatenation of ZNG streams (or ZNG files containing
ZNG streams) results in a valid ZNG data sequence.</p><p>For example, a large ZNG file can be arranged into multiple, smaller streams
to facilitate random access at stream boundaries.
This benefit comes at the cost of some additional overhead --
the space consumed by stream boundary markers and repeated type definitions.
Choosing an appropriate stream size that balances this overhead with the
benefit of enabling random access is left up to implementations.</p><p>End-of-stream markers are also useful in the context of sending ZNG over Kafka,
as a receiver can easily resynchronize with a live Kafka topic by
discarding incomplete frames until a frame is found that is terminated
by an end-of-stream marker (presuming the sender implementation aligns
the ZNG frames on Kafka message boundaries).</p><p>A end-of-stream marker is encoded as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|0xff|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After this marker, all previously read
typedefs are invalidated and the &quot;next available type ID&quot; is reset to
the initial value of 30.  To represent subsequent values that use a
previously defined type, the appropriate typedef control code must
be re-emitted
(and note that the typedef may now be assigned a different ID).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-primitive-types">3. Primitive Types<a class="hash-link" href="#3-primitive-types" title="Direct link to heading">​</a></h2><p>For each ZNG primitive type, the following table describes:</p><ul><li>its type ID, and</li><li>the interpretation of a length <code>N</code> <a href="#22-values-frame">value frame</a>.</li></ul><p>All fixed-size multi-byte sequences representing machine words
are serialized in little-endian format.</p><table><thead><tr><th>Type</th><th align="right">ID</th><th align="center">N</th><th>ZNG Value Interpretation</th></tr></thead><tbody><tr><td><code>uint8</code></td><td align="right">0</td><td align="center">variable</td><td>unsigned int of length N</td></tr><tr><td><code>uint16</code></td><td align="right">1</td><td align="center">variable</td><td>unsigned int of length N</td></tr><tr><td><code>uint32</code></td><td align="right">2</td><td align="center">variable</td><td>unsigned int of length N</td></tr><tr><td><code>uint64</code></td><td align="right">3</td><td align="center">variable</td><td>unsigned int of length N</td></tr><tr><td><code>uint128</code></td><td align="right">4</td><td align="center">variable</td><td>unsigned int of length N</td></tr><tr><td><code>uint256</code></td><td align="right">5</td><td align="center">variable</td><td>unsigned int of length N</td></tr><tr><td><code>int8</code></td><td align="right">6</td><td align="center">variable</td><td>signed int of length N</td></tr><tr><td><code>int16</code></td><td align="right">7</td><td align="center">variable</td><td>signed int of length N</td></tr><tr><td><code>int32</code></td><td align="right">8</td><td align="center">variable</td><td>signed int of length N</td></tr><tr><td><code>int64</code></td><td align="right">9</td><td align="center">variable</td><td>signed int of length N</td></tr><tr><td><code>int128</code></td><td align="right">10</td><td align="center">variable</td><td>signed int of length N</td></tr><tr><td><code>int256</code></td><td align="right">11</td><td align="center">variable</td><td>signed int of length N</td></tr><tr><td><code>duration</code></td><td align="right">12</td><td align="center">variable</td><td>signed int of length N as ns</td></tr><tr><td><code>time</code></td><td align="right">13</td><td align="center">variable</td><td>signed int of length N as ns since epoch</td></tr><tr><td><code>float16</code></td><td align="right">14</td><td align="center">2</td><td>2 bytes of IEEE 64-bit format</td></tr><tr><td><code>float32</code></td><td align="right">15</td><td align="center">4</td><td>4 bytes of IEEE 64-bit format</td></tr><tr><td><code>float64</code></td><td align="right">16</td><td align="center">8</td><td>8 bytes of IEEE 64-bit format</td></tr><tr><td><code>float128</code></td><td align="right">17</td><td align="center">16</td><td>16 bytes of IEEE 64-bit format</td></tr><tr><td><code>float256</code></td><td align="right">18</td><td align="center">32</td><td>32 bytes of IEEE 64-bit format</td></tr><tr><td><code>decimal32</code></td><td align="right">19</td><td align="center">4</td><td>4 bytes of IEEE decimal format</td></tr><tr><td><code>decimal64</code></td><td align="right">20</td><td align="center">8</td><td>8 bytes of IEEE decimal format</td></tr><tr><td><code>decimal128</code></td><td align="right">21</td><td align="center">16</td><td>16 bytes of IEEE decimal format</td></tr><tr><td><code>decimal256</code></td><td align="right">22</td><td align="center">32</td><td>32 bytes of IEEE decimal format</td></tr><tr><td><code>bool</code></td><td align="right">23</td><td align="center">1</td><td>one byte 0 (false) or 1 (true)</td></tr><tr><td><code>bytes</code></td><td align="right">24</td><td align="center">variable</td><td>N bytes of value</td></tr><tr><td><code>string</code></td><td align="right">25</td><td align="center">variable</td><td>UTF-8 byte sequence</td></tr><tr><td><code>ip</code></td><td align="right">26</td><td align="center">4 or 16</td><td>4 or 16 bytes of IP address</td></tr><tr><td><code>net</code></td><td align="right">27</td><td align="center">8 or 32</td><td>8 or 32 bytes of IP prefix and subnet mask</td></tr><tr><td><code>type</code></td><td align="right">28</td><td align="center">variable</td><td>type value byte sequence <a href="#4-type-values">as defined below</a></td></tr><tr><td><code>null</code></td><td align="right">29</td><td align="center">0</td><td>No value, always represents an undefined value</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-type-values">4. Type Values<a class="hash-link" href="#4-type-values" title="Direct link to heading">​</a></h2><p>As the ZSON data model supports first-class types and because the ZNG design goals
require that value serializations cannot change across type contexts, type values
must be encoded in a fashion that is independent of the type context.
Thus, a serialized type value encodes the entire type in a canonical form
according to the recursive definition in this section.</p><p>The type value of a primitive type (include type <code>type</code>) is its primitive ID,
serialized as a single byte.</p><p>The type value of a complex type is serialized recursively according to the
complex type it represents as described below.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="41-record-type-value">4.1 Record Type Value<a class="hash-link" href="#41-record-type-value" title="Direct link to heading">​</a></h4><p>A record type value has the form:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">---------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|30|&lt;ncolumns&gt;|&lt;name1&gt;&lt;typeval&gt;&lt;name2&gt;&lt;typeval&gt;...|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---------------------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where <code>&lt;ncolumns&gt;</code> is the number of columns in the record encoded as a <code>uvarint</code>,
<code>&lt;name1&gt;</code> etc. are the field names encoded as in the
record typedef, and each <code>&lt;typeval&gt;</code> is a recursive encoding of a type value.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="42-array-type-value">4.2 Array Type Value<a class="hash-link" href="#42-array-type-value" title="Direct link to heading">​</a></h4><p>An array type value has the form:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">--------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|31|&lt;typeval&gt;|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where <code>&lt;typeval&gt;</code> is a recursive encoding of a type value.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="43-set-type-value">4.3 Set Type Value<a class="hash-link" href="#43-set-type-value" title="Direct link to heading">​</a></h4><p>An set type value has the form:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">--------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|32|&lt;typeval&gt;|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where <code>&lt;typeval&gt;</code> is a recursive encoding of a type value.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="44-map-type-value">4.4 Map Type Value<a class="hash-link" href="#44-map-type-value" title="Direct link to heading">​</a></h4><p>A map type value has the form:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">--------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|33|&lt;key-type&gt;|&lt;val-type&gt;|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where <code>&lt;key-type&gt;</code> and <code>&lt;val-type&gt;</code> are recursive encodings of type values.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="45-union-type-value">4.5 Union Type Value<a class="hash-link" href="#45-union-type-value" title="Direct link to heading">​</a></h4><p>A union type value has the form:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-----------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|34|&lt;ntypes&gt;|&lt;typeval&gt;&lt;typeval&gt;...|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where <code>&lt;ntypes&gt;</code> is the number of types in the union encoded as a <code>uvarint</code>
and each <code>&lt;typeval&gt;</code> is a recursive definition of a type value.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="46-enum-type-value">4.6 Enum Type Value<a class="hash-link" href="#46-enum-type-value" title="Direct link to heading">​</a></h4><p>An enum type value has the form:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|35|&lt;nelem&gt;|&lt;name1&gt;&lt;name2&gt;...|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where <code>&lt;nelem&gt;</code> and each symbol name is encoded as in an enum typedef.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="47-error-type-value">4.7 Error Type Value<a class="hash-link" href="#47-error-type-value" title="Direct link to heading">​</a></h4><p>An error type value has the form:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|36|&lt;type&gt;|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where <code>&lt;type&gt;</code> is the type value of the error.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="48-named-type-type-value">4.8 Named Type Type Value<a class="hash-link" href="#48-named-type-type-value" title="Direct link to heading">​</a></h4><p>A named type type value may appear either as a definition or a reference.
When a named type is referenced, it must have been previously
defined in the type value in accordance with a left-to-right depth-first-search (DFS)
traversal of the type.</p><p>A named type definition has the form:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">--------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|37|&lt;name&gt;&lt;typeval&gt;|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where <code>&lt;name&gt;</code> is encoded as in an named type typedef
and <code>&lt;typeval&gt;</code> is a recursive encoding of a type value.  This creates
a binding between the given name and the indicated type value only within the
scope of the encoded value and does not affect the type context.
This binding may be changed by another named type definition
of the same name in the same type value according to the DFS order.</p><p>An named type reference has the form:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">-----------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|38|&lt;name&gt;|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It is an error for an named type reference to appear in a type value with a name
that has not been previously defined according to the DFS order.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/brimdata/zed/edit/main/docs/formats/zng.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/formats/zed/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Data Model</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/formats/zson/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ZSON</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-introduction" class="table-of-contents__link toc-highlight">1. Introduction</a></li><li><a href="#2-the-zng-format" class="table-of-contents__link toc-highlight">2. The ZNG Format</a><ul><li><a href="#21-types-frame" class="table-of-contents__link toc-highlight">2.1 Types Frame</a></li><li><a href="#22-values-frame" class="table-of-contents__link toc-highlight">2.2 Values Frame</a></li><li><a href="#23-control-frame" class="table-of-contents__link toc-highlight">2.3 Control Frame</a></li><li><a href="#24-end-of-stream" class="table-of-contents__link toc-highlight">2.4 End of Stream</a></li></ul></li><li><a href="#3-primitive-types" class="table-of-contents__link toc-highlight">3. Primitive Types</a></li><li><a href="#4-type-values" class="table-of-contents__link toc-highlight">4. Type Values</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.brimdata.io/join-slack/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/brimdata" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.brimdata.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Brim Data, Inc.<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/brimdata" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Brim Data, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.9b291edb.js"></script>
<script src="/assets/js/main.d73159f0.js"></script>
</body>
</html>