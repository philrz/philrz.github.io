<!doctype html>
<html class="docs-version-v1.2.0" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CV1VB9VF13"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-CV1VB9VF13",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Zed" href="/opensearch.xml">
<link rel="stylesheet" href="https://use.typekit.net/nll6rzm.css"><title data-rh="true">ZJSON Specification | Zed</title><meta data-rh="true" property="og:image" content="https://zed.brimdata.io/img/zed-social-image.jpg"><meta data-rh="true" name="twitter:image" content="https://zed.brimdata.io/img/zed-social-image.jpg"><meta data-rh="true" property="og:url" content="https://zed.brimdata.io/docs/formats/zjson/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_version" content="v1.2.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-v1.2.0"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="v1.2.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-v1.2.0"><meta data-rh="true" name="twitter:card" content="summary"><meta data-rh="true" name="twitter:site" content="@brimdata"><meta data-rh="true" name="twitter:image:alt" content="Zed Documentation Image"><meta data-rh="true" property="og:title" content="ZJSON Specification | Zed"><meta data-rh="true" name="description" content="1. Introduction"><meta data-rh="true" property="og:description" content="1. Introduction"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://zed.brimdata.io/docs/formats/zjson/"><link data-rh="true" rel="alternate" href="https://zed.brimdata.io/docs/formats/zjson/" hreflang="en"><link data-rh="true" rel="alternate" href="https://zed.brimdata.io/docs/formats/zjson/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://WZNIEWJ5O6-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.76c4b5d7.css">
<link rel="preload" href="/assets/js/runtime~main.04ec528e.js" as="script">
<link rel="preload" href="/assets/js/main.e6e45208.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/zed-logo.svg" alt="Zed Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/zed-logo.svg" alt="Zed Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Zed</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link" href="/docs/">v1.2.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/formats/zjson/">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/formats/zjson/">v1.2.0</a></li><li><a class="dropdown__link" href="/docs/v1.1.0/formats/zjson/">v1.1.0</a></li></ul></div><a href="https://github.com/brimdata" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_S7eR toggle_TdHA toggleDisabled_f9M3"><div class="toggleButton_rCf9" role="button" tabindex="-1"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></div><input type="checkbox" class="toggleScreenReader_g2nN" aria-label="Switch between dark and light mode (currently light mode)"></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/install/">Installation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/commands/">Commands</a><button aria-label="Toggle the collapsible sidebar category &#x27;Commands&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/tutorials/">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/language/">Language</a><button aria-label="Toggle the collapsible sidebar category &#x27;Language&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/docs/formats/">Formats</a><button aria-label="Toggle the collapsible sidebar category &#x27;Formats&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/formats/zed/">Data Model</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/formats/zng/">ZNG</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/formats/zson/">ZSON</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/formats/zst/">ZST</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/formats/zjson/">ZJSON</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/formats/compression/">Compression</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/lake/api/">Lake</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/libraries/">Libraries</a><button aria-label="Toggle the collapsible sidebar category &#x27;Libraries&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/">🏠</a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/docs/formats/">Formats</a></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/docs/formats/zjson/">ZJSON</a></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v1.2.0</span><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>ZJSON Specification</h1><h2 class="anchor anchorWithStickyNavbar_mojV" id="1-introduction">1. Introduction<a class="hash-link" href="#1-introduction" title="Direct link to heading">​</a></h2><p>The <a href="/docs/formats/zed/">Zed data model</a>
is based on richly typed records with a deterministic column order,
as is implemented by the <a href="/docs/formats/zson/">ZSON</a>, <a href="/docs/formats/zng/">ZNG</a>, and <a href="/docs/formats/zst/">ZST</a> formats.
Given the ubiquity of JSON, it is desirable to also be able to serialize
Zed data into the JSON format.   However, encoding Zed data values
directly as JSON values would not work without loss of information.</p><p>For example, consider this Zed data as <a href="/docs/formats/zson/">ZSON</a>:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ts: 2018-03-24T17:15:21.926018012Z,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    a: &quot;hello, world&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    b: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        x: 4611686018427387904,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        y: 127.0.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>A straightforward translation to JSON might look like this:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;ts&quot;: 1521911721.926018012,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;a&quot;: &quot;hello, world&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;b&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;x&quot;: 4611686018427387904,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;y&quot;: &quot;127.0.0.1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>But, when this JSON is transmitted to a JavaScript client and parsed,
the result looks something like this:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;ts&quot;: 1521911721.926018,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;a&quot;: &quot;hello, world&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;b&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;x&quot;: 4611686018427388000,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;y&quot;: &quot;127.0.0.1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The good news is the <code>a</code> field came through just fine, but there are
a few problems with the remaining fields:</p><ul><li>the timestamp lost precision (due to 53 bits of mantissa in a JavaScript
IEEE 754 floating point number) and was converted from a time type to a number,</li><li>the int64 lost precision for the same reason, and</li><li>the IP address has been converted to a string.</li></ul><p>As a comparison, Python&#x27;s <code>json</code> module handles the 64-bit integer to full
precision, but loses precision on the floating point timestamp.
Also, it is at the whim of a JSON implementation whether
or not the order of object keys is preserved.</p><p>While JSON is well suited for data exchange of generic information, it is not
so appropriate for a <a href="/docs/formats/#2-zed-a-super-structured-pattern">super-structured data model</a>
like Zed.  That said, JSON can be used as an encoding format for Zed by mapping Zed data
onto a JSON-based protocol.  This allows clients like web apps or
Electron apps to receive and understand Zed and, with the help of client
libraries like <a href="https://github.com/brimdata/zealot" target="_blank" rel="noopener noreferrer">Zealot</a>,
to manipulate the rich, structured Zed types that are implemented on top of
the basic JavaScript types.</p><p>In other words,
because JSON objects do not have a deterministic column order nor does JSON
in general have typing beyond the basics (i.e., strings, floating point numbers,
objects, arrays, and booleans), we decided to encode Zed data with
its embedded type model all in a layer above regular JSON.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="2-the-format">2. The Format<a class="hash-link" href="#2-the-format" title="Direct link to heading">​</a></h2><p>The format for representing Zed in JSON is called ZJSON.
Converting ZSON, ZNG, or ZST to ZJSON and back results in a complete and
accurate restoration of the original Zed data.</p><p>A ZJSON stream is defined as a sequence of JSON objects where each object
represents a Zed value and has the form:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;type&quot;: &lt;type&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;value&quot;: &lt;value&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>The type and value fields are encoded as defined below.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="21-type-encoding">2.1 Type Encoding<a class="hash-link" href="#21-type-encoding" title="Direct link to heading">​</a></h3><p>The type encoding for a primitive type is simply its <a href="/docs/formats/zed/#1-primitive-types">Zed type name</a>
e.g., &quot;int32&quot; or &quot;string&quot;.</p><p>Complex types are encoded with small-integer identifiers.
The first instance of a unique type defines the binding between the
integer identifier and its definition, where the definition may recursively
refer  to earlier complex types by their identifiers.</p><p>For example, the Zed type <code>{s:string,x:int32}</code> has this ZJSON format:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;id&quot;: 123,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;kind&quot;: &quot;record&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;fields&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;name&quot;: &quot;s&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;type&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;kind&quot;: &quot;primitive&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;name&quot;: &quot;string&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;name&quot;: &quot;x&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;type&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;kind&quot;: &quot;primitive&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;name&quot;: &quot;int32&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>A previously defined complex type may be referred to using a reference of the form:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;kind&quot;: &quot;ref&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;id&quot;: 123</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="211-record-type">2.1.1 Record Type<a class="hash-link" href="#211-record-type" title="Direct link to heading">​</a></h4><p>A record type is a JSON object of the form</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;id&quot;: &lt;number&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;kind&quot;: &quot;record&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;fields&quot;: [ &lt;field&gt;, &lt;field&gt;, ... ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>where each of the fields has the form</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;name&quot;: &lt;name&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;type&quot;: &lt;type&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>and <code>&lt;name&gt;</code> is a string defining the column name and <code>&lt;type&gt;</code> is a
recursively encoded type.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="212-array-type">2.1.2 Array Type<a class="hash-link" href="#212-array-type" title="Direct link to heading">​</a></h4><p>An array type is defined by a JSON object having the form</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;id&quot;: &lt;number&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;kind&quot;: &quot;array&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;type&quot;: &lt;type&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>where <code>&lt;type&gt;</code> is a recursively encoded type.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="213-set-type">2.1.3 Set Type<a class="hash-link" href="#213-set-type" title="Direct link to heading">​</a></h4><p>A set type is defined by a JSON object having the form</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;id&quot;: &lt;number&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;kind&quot;: &quot;set&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;type&quot;: &lt;type&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>where <code>&lt;type&gt;</code> is a recursively encoded type.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="214-map-type">2.1.4 Map Type<a class="hash-link" href="#214-map-type" title="Direct link to heading">​</a></h4><p>A map type is defined by a JSON object of the form</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;id&quot;: &lt;number&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;kind&quot;: &quot;map&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;key_type&quot;: &lt;type&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;val_type&quot;: &lt;type&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>where each <code>&lt;type&gt;</code> is a recursively encoded type.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="215-union-type">2.1.5 Union type<a class="hash-link" href="#215-union-type" title="Direct link to heading">​</a></h4><p>A union type is defined by a JSON object having the form</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;id&quot;: &lt;number&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;kind&quot;: &quot;union&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;types&quot;: [ &lt;type&gt;, &lt;type&gt;, ... ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>where the list of types comprise the types of the union and
and each <code>&lt;type&gt;</code>is a recursively encoded type.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="216-enum-type">2.1.6 Enum Type<a class="hash-link" href="#216-enum-type" title="Direct link to heading">​</a></h4><p>An enum type is a JSON object of the form</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;id&quot;: &lt;number&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;kind&quot;: &quot;enum&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;symbols&quot;: [ &lt;string&gt;, &lt;string&gt;, ... ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>where the unique <code>&lt;string&gt;</code> values define a finite set of symbols.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="217-error-type">2.1.7 Error Type<a class="hash-link" href="#217-error-type" title="Direct link to heading">​</a></h4><p>An error type is a JSON object of the form</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;id&quot;: &lt;number&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;kind&quot;: &quot;error&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;type&quot;: &lt;type&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>where <code>&lt;type&gt;</code> is a recursively encoded type.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="218-named-type">2.1.8 Named Type<a class="hash-link" href="#218-named-type" title="Direct link to heading">​</a></h4><p>A named type is encoded as a binding between a name and a Zed type
and represents a new type so named.  A type definition type has the form</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;id&quot;: &lt;number&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;kind&quot;: &quot;named&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;name&quot;: &lt;id&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;type&quot;: &lt;type&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>where <code>&lt;id&gt;</code> is a JSON string representing the newly defined type name
and <code>&lt;type&gt;</code> is a recursively encoded type.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="22-value-encoding">2.2 Value Encoding<a class="hash-link" href="#22-value-encoding" title="Direct link to heading">​</a></h3><p>The primitive values comprising an arbitrarily complex Zed data value are encoded
as a JSON array of strings mixed with nested JSON arrays whose structure
conforms to the nested structure of the value&#x27;s schema as follows:</p><ul><li>each record, array, and set is encoded as a JSON array of its composite values,</li><li>a union is encoded as a string of the form <code>&lt;tag&gt;:&lt;value&gt;</code> where <code>tag</code>
is an integer string representing the positional index in the union&#x27;s list of
types that specifies the type of <code>&lt;value&gt;</code>, which is a JSON string or array
as described recursively herein,</li><li>a map is encoded as a JSON array of two-element arrays of the form
<code>[ &lt;key&gt;, &lt;value&gt; ]</code> where <code>key</code> and <code>value</code> are recursively encoded,</li><li>a type value is encoded <a href="#21-type-encoding">as above</a>,</li><li>each primitive that is not a type value
is encoded as a string conforming to its ZSON representation, as described in the
<a href="/docs/formats/zson/#23-primitive-values">corresponding section of the ZSON specification</a>.</li></ul><p>For example, a record with three columns --- a string, an array of integers,
and an array of union of string, and float64 --- might have a value that looks like this:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">[ &quot;hello, world&quot;, [&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;], [&quot;1:foo&quot;, &quot;0:10&quot; ] ]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="3-object-framing">3. Object Framing<a class="hash-link" href="#3-object-framing" title="Direct link to heading">​</a></h2><p>A ZJSON file is composed of ZJSON objects formatted as
<a href="http://ndjson.org/" target="_blank" rel="noopener noreferrer">newline delimited JSON (NDJSON)</a>.
e.g., the <a href="/docs/commands/zq/">zq</a> CLI command
writes its ZJSON output as lines of NDJSON.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="4-example">4. Example<a class="hash-link" href="#4-example" title="Direct link to heading">​</a></h2><p>Here is an example that illustrates values of a repeated type,
nesting, records, array, and union. Consider the file <code>input.zson</code>:</p><div class="codeBlockContainer_I0IT language-mdtest-input theme-code-block"><div class="codeBlockContent_wNvx mdtest-input"><pre tabindex="0" class="prism-code language-mdtest-input codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{s:&quot;hello&quot;,r:{a:1,b:2}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{s:&quot;world&quot;,r:{a:3,b:4}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{s:&quot;hello&quot;,r:{a:[1,2,3]}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{s:&quot;goodnight&quot;,r:{x:{u:&quot;foo&quot;((string,int64))}}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{s:&quot;gracie&quot;,r:{x:{u:12((string,int64))}}}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>This data is represented in ZJSON as follows:</p><div class="codeBlockContainer_I0IT language-mdtest-command theme-code-block"><div class="codeBlockContent_wNvx mdtest-command"><pre tabindex="0" class="prism-code language-mdtest-command codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">zq -f zjson input.zson | jq .</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><div class="codeBlockContainer_I0IT language-mdtest-output theme-code-block"><div class="codeBlockContent_wNvx mdtest-output"><pre tabindex="0" class="prism-code language-mdtest-output codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;type&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;kind&quot;: &quot;record&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;id&quot;: 31,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;fields&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;name&quot;: &quot;s&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;type&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;kind&quot;: &quot;primitive&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;name&quot;: &quot;string&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;name&quot;: &quot;r&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;type&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;kind&quot;: &quot;record&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;id&quot;: 30,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;fields&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;name&quot;: &quot;a&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;type&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;kind&quot;: &quot;primitive&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;name&quot;: &quot;int64&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;name&quot;: &quot;b&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;type&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;kind&quot;: &quot;primitive&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;name&quot;: &quot;int64&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;value&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;hello&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;type&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;kind&quot;: &quot;ref&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;id&quot;: 31</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;value&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;world&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;3&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;4&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;type&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;kind&quot;: &quot;record&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;id&quot;: 34,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;fields&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;name&quot;: &quot;s&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;type&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;kind&quot;: &quot;primitive&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;name&quot;: &quot;string&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;name&quot;: &quot;r&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;type&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;kind&quot;: &quot;record&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;id&quot;: 33,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;fields&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;name&quot;: &quot;a&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;type&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;kind&quot;: &quot;array&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;id&quot;: 32,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;type&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;kind&quot;: &quot;primitive&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;name&quot;: &quot;int64&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;value&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;hello&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;2&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;3&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;type&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;kind&quot;: &quot;record&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;id&quot;: 38,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;fields&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;name&quot;: &quot;s&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;type&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;kind&quot;: &quot;primitive&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;name&quot;: &quot;string&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;name&quot;: &quot;r&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;type&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;kind&quot;: &quot;record&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;id&quot;: 37,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;fields&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;name&quot;: &quot;x&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &quot;type&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;kind&quot;: &quot;record&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;id&quot;: 36,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;fields&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;name&quot;: &quot;u&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;type&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      &quot;kind&quot;: &quot;union&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      &quot;id&quot;: 35,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      &quot;types&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          &quot;kind&quot;: &quot;primitive&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          &quot;name&quot;: &quot;int64&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          &quot;kind&quot;: &quot;primitive&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          &quot;name&quot;: &quot;string&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;value&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;goodnight&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;foo&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;type&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;kind&quot;: &quot;ref&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;id&quot;: 38</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;value&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;gracie&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &quot;12&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/brimdata/zed/edit/main/docs/formats/zjson.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/formats/zst/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">ZST</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/formats/compression/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Compression</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-introduction" class="table-of-contents__link toc-highlight">1. Introduction</a></li><li><a href="#2-the-format" class="table-of-contents__link toc-highlight">2. The Format</a><ul><li><a href="#21-type-encoding" class="table-of-contents__link toc-highlight">2.1 Type Encoding</a></li><li><a href="#22-value-encoding" class="table-of-contents__link toc-highlight">2.2 Value Encoding</a></li></ul></li><li><a href="#3-object-framing" class="table-of-contents__link toc-highlight">3. Object Framing</a></li><li><a href="#4-example" class="table-of-contents__link toc-highlight">4. Example</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://www.brimdata.io/join-slack/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/brimdata" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://www.brimdata.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Brim Data, Inc.<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/brimdata" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Brim Data, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.04ec528e.js"></script>
<script src="/assets/js/main.e6e45208.js"></script>
</body>
</html>